<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uygulama Merkezi v4</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            transition: all 0.3s ease;
        }
        
        .glass-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .app-card {
            cursor: pointer;
            text-align: center;
            padding: 24px;
            color: white;
        }
        
        .app-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }
        
        .app-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .app-description {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .hidden {
            display: none !important;
        }
        
        .btn {
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 500;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
        }
        
        .input-field {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 12px 16px;
            color: white;
            width: 100%;
            transition: all 0.3s ease;
        }
        
        .input-field::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .input-field:focus {
            outline: none;
            border-color: #667eea;
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .screen-transition {
            animation: slideIn 0.4s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .calendar-day:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .calendar-day.today {
            background: #667eea;
            color: white;
            font-weight: bold;
        }
        
        .calendar-day.other-month {
            opacity: 0.3;
        }
        
        .note-item {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            color: white;
        }
        
        .note-title {
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .note-content {
            opacity: 0.8;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .note-date {
            opacity: 0.6;
            font-size: 12px;
            margin-top: 8px;
        }
        
        .weather-card {
            text-align: center;
            padding: 20px;
        }
        
        .weather-temp {
            font-size: 48px;
            font-weight: bold;
            margin: 16px 0;
        }
        
        .weather-icon {
            font-size: 64px;
            margin-bottom: 16px;
        }
        
        .password-strength {
            height: 8px;
            border-radius: 4px;
            margin-top: 8px;
            transition: all 0.3s ease;
        }
        
        .strength-weak { background: #ef4444; }
        .strength-medium { background: #f59e0b; }
        .strength-strong { background: #10b981; }
        
        /* Custom scrollbar styles */
        .menu-scroll::-webkit-scrollbar {
            width: 6px;
        }
        
        .menu-scroll::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }
        
        .menu-scroll::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
        }
        
        .menu-scroll::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
        
        /* Game Styles */
        .game-board {
            display: grid;
            gap: 2px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 8px;
            margin: 0 auto;
        }
        
        .snake-cell, .memory-card, .ttt-cell, .game2048-cell {
            aspect-ratio: 1;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .snake-cell {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .snake-cell.snake { background: #10b981; }
        .snake-cell.food { background: #ef4444; }
        
        .memory-card {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 24px;
        }
        
        .memory-card.flipped { background: rgba(102, 126, 234, 0.8); }
        .memory-card.matched { background: rgba(16, 185, 129, 0.8); }
        
        .ttt-cell {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 32px;
        }
        
        .ttt-cell:hover { background: rgba(255, 255, 255, 0.2); }
        
        .game2048-cell {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 18px;
            font-weight: bold;
        }
        
        .game2048-cell.tile-2 { background: #eee4da; color: #776e65; }
        .game2048-cell.tile-4 { background: #ede0c8; color: #776e65; }
        .game2048-cell.tile-8 { background: #f2b179; color: #f9f6f2; }
        .game2048-cell.tile-16 { background: #f59563; color: #f9f6f2; }
        .game2048-cell.tile-32 { background: #f67c5f; color: #f9f6f2; }
        .game2048-cell.tile-64 { background: #f65e3b; color: #f9f6f2; }
        .game2048-cell.tile-128 { background: #edcf72; color: #f9f6f2; font-size: 16px; }
        .game2048-cell.tile-256 { background: #edcc61; color: #f9f6f2; font-size: 16px; }
        .game2048-cell.tile-512 { background: #edc850; color: #f9f6f2; font-size: 16px; }
        .game2048-cell.tile-1024 { background: #edc53f; color: #f9f6f2; font-size: 14px; }
        .game2048-cell.tile-2048 { background: #edc22e; color: #f9f6f2; font-size: 14px; }
        
        /* Drawing Canvas */
        .drawing-canvas {
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: white;
            cursor: crosshair;
        }
        
        .color-picker {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .color-picker.active {
            border-color: white;
            transform: scale(1.1);
        }
        
        /* Tool Styles */
        .converter-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
        }
        
        .color-preview {
            width: 100%;
            height: 60px;
            border-radius: 8px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            margin: 8px 0;
        }
        
        /* Productivity Styles */
        .pomodoro-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            border: 8px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            position: relative;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .pomodoro-progress {
            position: absolute;
            top: -8px;
            left: -8px;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            border: 8px solid transparent;
            border-top-color: #10b981;
            transition: transform 0.3s ease;
        }
        
        .todo-item {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .todo-item.completed {
            opacity: 0.6;
            text-decoration: line-through;
        }
        
        .habit-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            margin: 8px 0;
        }
        
        .habit-day {
            aspect-ratio: 1;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
            color: white;
        }
        
        .habit-day.completed {
            background: #10b981;
        }
        
        .habit-day.today {
            border: 2px solid #667eea;
        }
        
        @media (max-width: 768px) {
            .app-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 16px;
            }
            
            .app-card {
                padding: 16px;
            }
            
            .app-icon {
                font-size: 36px;
            }
            
            .app-title {
                font-size: 16px;
            }
            
            #currentTime {
                font-size: 3rem !important;
            }
            
            .glass-card {
                padding: 2rem !important;
            }
            
            .pomodoro-circle {
                width: 150px;
                height: 150px;
            }
            
            .pomodoro-progress {
                width: 150px;
                height: 150px;
            }
            
            .drawing-canvas {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="glass-card sticky top-0 z-50 p-4 m-4 mb-0">
        <div class="flex items-center justify-between">
            <button onclick="toggleMenu()" class="btn btn-primary p-2">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
            <h1 class="text-3xl font-bold text-white">
                UYGULAMA MERKEZİ
            </h1>
            <div class="flex items-center space-x-3">
                <div id="userInfo" class="text-white text-sm hidden">
                    <div class="flex items-center space-x-2">
                        <span class="text-lg">👤</span>
                        <div>
                            <div id="currentUsername" class="font-semibold"></div>
                            <div id="sessionTime" class="text-xs opacity-70"></div>
                        </div>
                    </div>
                </div>
                <button onclick="logoutUser()" id="logoutBtn" class="btn btn-danger p-2 hidden" title="Çıkış Yap">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <!-- Side Menu -->
    <div id="sideMenu" class="fixed top-0 left-0 h-full w-80 bg-black/50 backdrop-blur-xl border-r border-white/20 transform -translate-x-full transition-transform duration-300 z-50">
        <div class="p-6 h-full flex flex-col">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-xl font-bold text-white">Uygulamalar</h2>
                <button onclick="toggleMenu()" class="btn btn-primary p-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="space-y-3 overflow-y-auto flex-1 pr-2 menu-scroll" style="scrollbar-width: thin; scrollbar-color: rgba(255,255,255,0.3) transparent;">
                <div class="menu-item glass-card p-4 cursor-pointer hover:bg-white/20 transition-all" onclick="showApp('calculator'); toggleMenu();">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">🧮</span>
                        <div>
                            <div class="font-semibold text-white">Hesap Makinesi</div>
                            <div class="text-sm opacity-70 text-white">Matematiksel işlemler</div>
                        </div>
                    </div>
                </div>
                
                <div class="menu-item glass-card p-4 cursor-pointer hover:bg-white/20 transition-all" onclick="showApp('clock'); toggleMenu();">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">🕐</span>
                        <div>
                            <div class="font-semibold text-white">Saat</div>
                            <div class="text-sm opacity-70 text-white">Dünya saatleri ve zamanlayıcı</div>
                        </div>
                    </div>
                </div>
                
                <div class="menu-item glass-card p-4 cursor-pointer hover:bg-white/20 transition-all" onclick="showApp('notes'); toggleMenu();">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">📝</span>
                        <div>
                            <div class="font-semibold text-white">Not Defteri</div>
                            <div class="text-sm opacity-70 text-white">Notlarınızı kaydedin</div>
                        </div>
                    </div>
                </div>
                
                <div class="menu-item glass-card p-4 cursor-pointer hover:bg-white/20 transition-all" onclick="showApp('calendar'); toggleMenu();">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">📅</span>
                        <div>
                            <div class="font-semibold text-white">Takvim</div>
                            <div class="text-sm opacity-70 text-white">Tarih ve etkinlik takibi</div>
                        </div>
                    </div>
                </div>
                
                <div class="menu-item glass-card p-4 cursor-pointer hover:bg-white/20 transition-all" onclick="showApp('password'); toggleMenu();">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">🔐</span>
                        <div>
                            <div class="font-semibold text-white">Şifre Önerme</div>
                            <div class="text-sm opacity-70 text-white">Güvenli şifre oluşturun</div>
                        </div>
                    </div>
                </div>
                
                <div class="menu-item glass-card p-4 cursor-pointer hover:bg-white/20 transition-all" onclick="showApp('weather'); toggleMenu();">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">🌤️</span>
                        <div>
                            <div class="font-semibold text-white">Hava Durumu</div>
                            <div class="text-sm opacity-70 text-white">Güncel hava durumu</div>
                        </div>
                    </div>
                </div>
                
                <!-- Games Section -->
                <div class="border-t border-white/20 my-3 pt-3">
                    <div class="text-sm font-semibold text-white/60 mb-2 px-2">🎮 OYUNLAR</div>
                </div>
                
                <div class="menu-item glass-card p-4 cursor-pointer hover:bg-white/20 transition-all" onclick="showApp('snake'); toggleMenu();">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">🐍</span>
                        <div>
                            <div class="font-semibold text-white">Snake Oyunu</div>
                            <div class="text-sm opacity-70 text-white">Klasik yılan oyunu</div>
                        </div>
                    </div>
                </div>
                
                <div class="menu-item glass-card p-4 cursor-pointer hover:bg-white/20 transition-all" onclick="showApp('game2048'); toggleMenu();">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">🔢</span>
                        <div>
                            <div class="font-semibold text-white">2048</div>
                            <div class="text-sm opacity-70 text-white">Sayı birleştirme oyunu</div>
                        </div>
                    </div>
                </div>
                
                <div class="menu-item glass-card p-4 cursor-pointer hover:bg-white/20 transition-all" onclick="showApp('memory'); toggleMenu();">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">🧠</span>
                        <div>
                            <div class="font-semibold text-white">Hafıza Oyunu</div>
                            <div class="text-sm opacity-70 text-white">Kart eşleştirme</div>
                        </div>
                    </div>
                </div>
                
                <div class="menu-item glass-card p-4 cursor-pointer hover:bg-white/20 transition-all" onclick="showApp('tictactoe'); toggleMenu();">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">⭕</span>
                        <div>
                            <div class="font-semibold text-white">XOX Oyunu</div>
                            <div class="text-sm opacity-70 text-white">Tic Tac Toe</div>
                        </div>
                    </div>
                </div>
                
                <!-- Tools Section -->
                <div class="border-t border-white/20 my-3 pt-3">
                    <div class="text-sm font-semibold text-white/60 mb-2 px-2">🛠️ ARAÇLAR</div>
                </div>
                
                <div class="menu-item glass-card p-4 cursor-pointer hover:bg-white/20 transition-all" onclick="showApp('qrcode'); toggleMenu();">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">📱</span>
                        <div>
                            <div class="font-semibold text-white">QR Kod</div>
                            <div class="text-sm opacity-70 text-white">QR kod oluşturucu</div>
                        </div>
                    </div>
                </div>
                
                <div class="menu-item glass-card p-4 cursor-pointer hover:bg-white/20 transition-all" onclick="showApp('converter'); toggleMenu();">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">🔄</span>
                        <div>
                            <div class="font-semibold text-white">Birim Dönüştürücü</div>
                            <div class="text-sm opacity-70 text-white">Uzunluk, ağırlık, sıcaklık</div>
                        </div>
                    </div>
                </div>
                
                <div class="menu-item glass-card p-4 cursor-pointer hover:bg-white/20 transition-all" onclick="showApp('colortools'); toggleMenu();">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">🎨</span>
                        <div>
                            <div class="font-semibold text-white">Renk Araçları</div>
                            <div class="text-sm opacity-70 text-white">Hex, RGB dönüştürücü</div>
                        </div>
                    </div>
                </div>
                
                <div class="menu-item glass-card p-4 cursor-pointer hover:bg-white/20 transition-all" onclick="showApp('texttools'); toggleMenu();">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">📝</span>
                        <div>
                            <div class="font-semibold text-white">Metin Araçları</div>
                            <div class="text-sm opacity-70 text-white">Kelime sayacı, dönüştürücü</div>
                        </div>
                    </div>
                </div>
                
                <!-- Productivity Section -->
                <div class="border-t border-white/20 my-3 pt-3">
                    <div class="text-sm font-semibold text-white/60 mb-2 px-2">📊 VERİMLİLİK</div>
                </div>
                
                <div class="menu-item glass-card p-4 cursor-pointer hover:bg-white/20 transition-all" onclick="showApp('pomodoro'); toggleMenu();">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">🍅</span>
                        <div>
                            <div class="font-semibold text-white">Pomodoro Timer</div>
                            <div class="text-sm opacity-70 text-white">25dk çalışma + 5dk mola</div>
                        </div>
                    </div>
                </div>
                
                <div class="menu-item glass-card p-4 cursor-pointer hover:bg-white/20 transition-all" onclick="showApp('todolist'); toggleMenu();">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">✅</span>
                        <div>
                            <div class="font-semibold text-white">Görev Listesi</div>
                            <div class="text-sm opacity-70 text-white">Todo list</div>
                        </div>
                    </div>
                </div>
                
                <div class="menu-item glass-card p-4 cursor-pointer hover:bg-white/20 transition-all" onclick="showApp('habits'); toggleMenu();">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">📈</span>
                        <div>
                            <div class="font-semibold text-white">Alışkanlık Takibi</div>
                            <div class="text-sm opacity-70 text-white">Günlük alışkanlıklar</div>
                        </div>
                    </div>
                </div>
                
                <div class="menu-item glass-card p-4 cursor-pointer hover:bg-white/20 transition-all" onclick="showApp('goals'); toggleMenu();">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">🎯</span>
                        <div>
                            <div class="font-semibold text-white">Hedef Takibi</div>
                            <div class="text-sm opacity-70 text-white">Kişisel hedefler</div>
                        </div>
                    </div>
                </div>
                
                <!-- Creative Section -->
                <div class="border-t border-white/20 my-3 pt-3">
                    <div class="text-sm font-semibold text-white/60 mb-2 px-2">🎨 YARATICILIK</div>
                </div>
                
                <div class="menu-item glass-card p-4 cursor-pointer hover:bg-white/20 transition-all" onclick="showApp('drawing'); toggleMenu();">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">🖌️</span>
                        <div>
                            <div class="font-semibold text-white">Çizim Tahtası</div>
                            <div class="text-sm opacity-70 text-white">Dijital çizim aracı</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Support and AI Buttons -->
    <div class="fixed bottom-6 right-6 flex flex-col space-y-3 z-40">
        <!-- Refresh Button -->
        <button onclick="refreshApp()" class="btn btn-success rounded-full w-14 h-14 shadow-lg hover:shadow-xl bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700" title="Uygulamayı Yenile">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
            </svg>
        </button>
        
        <!-- AI Chat Button -->
        <button onclick="showAIModal()" class="btn btn-primary rounded-full w-14 h-14 shadow-lg hover:shadow-xl bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700">
            <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
            </svg>
        </button>
        
        <!-- Support Button -->
        <button onclick="showSupportModal()" class="btn btn-primary rounded-full w-14 h-14 shadow-lg hover:shadow-xl">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
            </svg>
        </button>
    </div>

    <!-- AI Chat Modal -->
    <div id="aiModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="glass-card p-6 max-w-2xl w-full max-h-[80vh] flex flex-col">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-semibold text-white flex items-center space-x-2">
                    <span class="text-3xl">🤖</span>
                    <span>İŞLEV</span>
                </h2>
                <button onclick="closeAIModal()" class="btn btn-primary p-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Chat Messages -->
            <div id="chatMessages" class="flex-1 overflow-y-auto space-y-4 mb-4 max-h-96 p-4 glass-card">
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 rounded-full bg-gradient-to-r from-purple-600 to-blue-600 flex items-center justify-center text-white font-bold">İ</div>
                    <div class="glass-card p-3 flex-1">
                        <p class="text-white">Merhaba! Ben İŞLEV asistanınızım. Size nasıl yardımcı olabilirim?</p>
                    </div>
                </div>
            </div>
            
            <!-- Chat Input -->
            <div class="flex space-x-3">
                <input type="text" id="aiInput" class="input-field flex-1" placeholder="Mesajınızı yazın..." onkeypress="handleAIKeyPress(event)">
                <button onclick="showTrainingModal()" class="btn btn-warning" title="Makine Öğrenmesi">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                    </svg>
                </button>
                <button onclick="sendAIMessage()" class="btn btn-success">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- AI Training Modal -->
    <div id="trainingModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="glass-card p-6 max-w-md w-full">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-semibold text-white">🧠 Makine Öğrenmesi</h2>
                <button onclick="closeTrainingModal()" class="btn btn-primary p-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-2 text-white">Kullanıcı Mesajı</label>
                    <textarea id="userMessage" class="input-field h-24 resize-none" placeholder="Kullanıcının soracağı soruyu yazın..."></textarea>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2 text-white">İŞLEV'in Vereceği Cevap</label>
                    <textarea id="aiResponse" class="input-field h-32 resize-none" placeholder="İŞLEV'in bu soruya vereceği ideal cevabı yazın..."></textarea>
                </div>
                
                <div class="flex space-x-3">
                    <button onclick="submitTraining()" class="btn btn-success flex-1">
                        🧠 Öğret
                    </button>
                    <button onclick="closeTrainingModal()" class="btn btn-danger">
                        ❌ İptal
                    </button>
                </div>
                
                <div id="trainingSuccess" class="text-green-300 text-sm text-center hidden">
                    ✅ Öğrenme verisi başarıyla kaydedildi!
                </div>
            </div>
        </div>
    </div>

    <!-- Database Access Modal -->
    <div id="databaseAccessModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="glass-card p-6 max-w-md w-full">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-semibold text-white">🔒 Veri Tabanı Erişimi</h2>
                <button onclick="closeDatabaseAccessModal()" class="btn btn-primary p-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-2 text-white">Erişim Şifresi</label>
                    <input type="password" id="databasePassword" class="input-field" placeholder="Şifreyi girin..." onkeypress="handleDatabaseKeyPress(event)">
                </div>
                
                <div class="flex space-x-3">
                    <button onclick="verifyDatabaseAccess()" class="btn btn-success flex-1">
                        🔓 Giriş Yap
                    </button>
                    <button onclick="closeDatabaseAccessModal()" class="btn btn-danger">
                        ❌ İptal
                    </button>
                </div>
                
                <div id="accessError" class="text-red-300 text-sm text-center hidden">
                    ❌ Hatalı şifre! Erişim reddedildi.
                </div>
            </div>
        </div>
    </div>

    <!-- User Login Modal -->
    <div id="userLoginModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="glass-card p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="text-center mb-6">
                <h2 class="text-3xl font-bold text-white mb-2">🚀 UYGULAMA MERKEZİ</h2>
                <p class="text-white opacity-80">Devam etmek için giriş yapın</p>
            </div>
            
            <!-- Login Form -->
            <div id="loginForm" class="space-y-4">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2 text-white">Kullanıcı Adı</label>
                        <input type="text" id="usernameInput" class="input-field" placeholder="Kullanıcı adınızı girin..." maxlength="20" onkeypress="handleLoginKeyPress(event)">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2 text-white">Şifre</label>
                        <div class="relative">
                            <input type="password" id="passwordInput" class="input-field pr-20" placeholder="Şifrenizi girin..." minlength="6" onkeypress="handleLoginKeyPress(event)">
                            <button type="button" onclick="togglePasswordVisibility()" class="absolute right-12 top-1/2 transform -translate-y-1/2 text-white opacity-60 hover:opacity-100" title="Şifreyi göster/gizle">
                                👁️
                            </button>
                            <button type="button" onclick="generateRandomPassword()" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-white opacity-60 hover:opacity-100" title="Rastgele şifre oluştur">
                                🎲
                            </button>
                        </div>
                        <div class="text-xs text-white opacity-60 mt-1">
                            👁️ Şifreyi görmek için göz simgesine, 🎲 rastgele şifre için zar simgesine tıklayın
                        </div>
                    </div>
                </div>
                
                <div class="flex space-x-3">
                    <button onclick="loginUser()" class="btn btn-success flex-1">
                        🚀 Giriş Yap
                    </button>
                </div>
                
                <div id="loginError" class="text-red-300 text-sm text-center hidden">
                    <!-- Error messages will be shown here -->
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                    <div class="glass-card p-3">
                        <h4 class="font-semibold mb-2 text-white text-sm">👥 Kayıtlı Kullanıcılar (3/3)</h4>
                        <div id="registeredUsersList" class="text-xs text-white opacity-80 max-h-20 overflow-y-auto">
                            Yükleniyor...
                        </div>
                    </div>
                    
                    <div class="glass-card p-3">
                        <h4 class="font-semibold mb-2 text-white text-sm">⏳ Bekleme Kuyruğu</h4>
                        <div id="waitingQueueList" class="text-xs text-white opacity-80 max-h-20 overflow-y-auto">
                            Yükleniyor...
                        </div>
                    </div>
                </div>
                
                <div class="glass-card p-3">
                    <h4 class="font-semibold mb-2 text-white text-sm">⏰ Kayıt Durumu</h4>
                    <div id="registrationTimer" class="text-xs text-white opacity-80">
                        Yükleniyor...
                    </div>
                </div>
                
                <div class="glass-card p-3">
                    <h4 class="font-semibold mb-2 text-white text-sm">ℹ️ Yeni Kurallar</h4>
                    <ul class="text-xs space-y-1 opacity-80 text-white">
                        <li>• Aynı anda maksimum 3 kullanıcı kayıt olabilir</li>
                        <li>• 3 kullanıcı kayıt olduktan sonra 1 saatlik bekleme başlar</li>
                        <li>• Süre bitince yeni kayıtlar açılır</li>
                        <li>• Oturumlar sınırsızdır (manuel çıkış gerekir)</li>
                        <li>• Kullanıcı adı 3-20 karakter arası olmalıdır</li>
                        <li>• Şifre en az 6 karakter olmalıdır</li>
                    </ul>
                </div>
            </div>
            
            <!-- Waiting Screen -->
            <div id="waitingScreen" class="hidden text-center space-y-6">
                <div class="text-6xl mb-4">⏳</div>
                <h3 class="text-2xl font-bold text-white mb-4">Lütfen Bekleyiniz</h3>
                <p class="text-white opacity-80 mb-6">Kayıt kapasitesi dolu. Yeni kayıtlar için bekleme süreniz:</p>
                
                <div class="glass-card p-6">
                    <div id="remainingTime" class="text-6xl font-mono font-bold text-white mb-4">
                        00:00:00
                    </div>
                    <div id="queuePosition" class="text-white opacity-80">
                        Sıra bekleniyor...
                    </div>
                </div>
                
                <button onclick="location.reload()" class="btn btn-primary">
                    🔄 Sayfayı Yenile
                </button>
            </div>
        </div>
    </div>

    <!-- Support Modal -->
    <div id="supportModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="glass-card p-6 max-w-md w-full">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-semibold text-white">🎧 Destek</h2>
                <button onclick="closeSupportModal()" class="btn btn-primary p-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-2 text-white">Mesaj Türü</label>
                    <select id="supportType" class="input-field">
                        <option value="suggestion">💡 Öneri</option>
                        <option value="complaint">😞 Şikayet</option>
                        <option value="bug">🐛 Hata Bildirimi</option>
                        <option value="other">❓ Diğer</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2 text-white">Mesajınız</label>
                    <textarea id="supportMessage" class="input-field h-32 resize-none" placeholder="Önerinizi, şikayetinizi veya sorununuzu buraya yazabilirsiniz..."></textarea>
                </div>
                
                <div class="flex space-x-3">
                    <button onclick="submitSupport()" class="btn btn-success flex-1">
                        📤 Gönder
                    </button>
                    <button onclick="closeSupportModal()" class="btn btn-danger">
                        ❌ İptal
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="p-4">
        <!-- Home Screen -->
        <div id="homeScreen" class="max-w-4xl mx-auto screen-transition">
            <div class="text-center py-16 mb-8">
                <div class="glass-card p-12 max-w-2xl mx-auto">
                    <div id="currentTime" class="text-7xl font-mono mb-6 text-white font-bold cursor-pointer hover:text-blue-300 transition-colors duration-300" onclick="checkDatabaseAccess()" title="🔒 Gizli Erişim"></div>
                    <div id="currentDate" class="text-2xl opacity-90 text-white"></div>
                </div>
            </div>
            
            <div class="text-center py-8">
                <p class="text-xl text-white opacity-80">Sol üst köşedeki menü butonuna tıklayarak uygulamalara erişebilirsiniz</p>
            </div>
        </div>

        <!-- Calculator Screen -->
        <div id="calculatorScreen" class="hidden max-w-md mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">🧮 Hesap Makinesi</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="bg-black/20 rounded-lg p-4 mb-4">
                    <div id="calculatorDisplay" class="text-right text-3xl font-mono min-h-[40px] flex items-center justify-end text-white">0</div>
                </div>
                
                <div class="grid grid-cols-4 gap-3">
                    <button class="btn bg-red-500 hover:bg-red-600 text-white" onclick="clearCalculator()">C</button>
                    <button class="btn bg-orange-500 hover:bg-orange-600 text-white" onclick="deleteLast()">⌫</button>
                    <button class="btn bg-blue-500 hover:bg-blue-600 text-white" onclick="appendToCalculator('/')">/</button>
                    <button class="btn bg-blue-500 hover:bg-blue-600 text-white" onclick="appendToCalculator('*')">×</button>
                    
                    <button class="btn bg-gray-600 hover:bg-gray-700 text-white" onclick="appendToCalculator('7')">7</button>
                    <button class="btn bg-gray-600 hover:bg-gray-700 text-white" onclick="appendToCalculator('8')">8</button>
                    <button class="btn bg-gray-600 hover:bg-gray-700 text-white" onclick="appendToCalculator('9')">9</button>
                    <button class="btn bg-blue-500 hover:bg-blue-600 text-white" onclick="appendToCalculator('-')">-</button>
                    
                    <button class="btn bg-gray-600 hover:bg-gray-700 text-white" onclick="appendToCalculator('4')">4</button>
                    <button class="btn bg-gray-600 hover:bg-gray-700 text-white" onclick="appendToCalculator('5')">5</button>
                    <button class="btn bg-gray-600 hover:bg-gray-700 text-white" onclick="appendToCalculator('6')">6</button>
                    <button class="btn bg-blue-500 hover:bg-blue-600 text-white" onclick="appendToCalculator('+')">+</button>
                    
                    <button class="btn bg-gray-600 hover:bg-gray-700 text-white" onclick="appendToCalculator('1')">1</button>
                    <button class="btn bg-gray-600 hover:bg-gray-700 text-white" onclick="appendToCalculator('2')">2</button>
                    <button class="btn bg-gray-600 hover:bg-gray-700 text-white" onclick="appendToCalculator('3')">3</button>
                    <button class="btn bg-green-500 hover:bg-green-600 text-white row-span-2" onclick="calculateResult()" style="grid-row: span 2;">=</button>
                    
                    <button class="btn bg-gray-600 hover:bg-gray-700 text-white col-span-2" onclick="appendToCalculator('0')" style="grid-column: span 2;">0</button>
                    <button class="btn bg-gray-600 hover:bg-gray-700 text-white" onclick="appendToCalculator('.')">.</button>
                </div>
            </div>
        </div>

        <!-- Clock Screen -->
        <div id="clockScreen" class="hidden max-w-4xl mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">🕐 Saat</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- World Clock -->
                    <div class="glass-card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-white">🌍 Dünya Saatleri</h3>
                        <div class="text-center mb-6">
                            <div id="mainClock" class="text-4xl font-mono mb-2 text-white"></div>
                            <div id="mainDate" class="text-sm opacity-80 text-white"></div>
                        </div>
                        
                        <div class="space-y-3">
                            <div class="glass-card p-3 flex justify-between items-center">
                                <div>
                                    <div class="font-medium text-white">İstanbul</div>
                                    <div class="opacity-60 text-sm text-white">Türkiye</div>
                                </div>
                                <div id="istanbul-time" class="font-mono text-white"></div>
                            </div>
                            <div class="glass-card p-3 flex justify-between items-center">
                                <div>
                                    <div class="font-medium text-white">London</div>
                                    <div class="opacity-60 text-sm text-white">İngiltere</div>
                                </div>
                                <div id="london-time" class="font-mono text-white"></div>
                            </div>
                            <div class="glass-card p-3 flex justify-between items-center">
                                <div>
                                    <div class="font-medium text-white">New York</div>
                                    <div class="opacity-60 text-sm text-white">ABD</div>
                                </div>
                                <div id="newyork-time" class="font-mono text-white"></div>
                            </div>
                            <div class="glass-card p-3 flex justify-between items-center">
                                <div>
                                    <div class="font-medium text-white">Tokyo</div>
                                    <div class="opacity-60 text-sm text-white">Japonya</div>
                                </div>
                                <div id="tokyo-time" class="font-mono text-white"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Timer -->
                    <div class="glass-card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-white">⏰ Zamanlayıcı</h3>
                        <div class="text-center mb-6">
                            <div id="timerDisplay" class="text-4xl font-mono mb-4 text-white">00:00:00</div>
                            <div class="grid grid-cols-3 gap-2 mb-4">
                                <input type="number" id="timerHours" class="input-field text-center" placeholder="SS" min="0" max="23" value="0">
                                <input type="number" id="timerMinutes" class="input-field text-center" placeholder="DD" min="0" max="59" value="5">
                                <input type="number" id="timerSeconds" class="input-field text-center" placeholder="SS" min="0" max="59" value="0">
                            </div>
                            <div class="flex space-x-2 justify-center">
                                <button id="startTimer" class="btn btn-success" onclick="startTimer()">Başlat</button>
                                <button id="pauseTimer" class="btn btn-warning" onclick="pauseTimer()">Duraklat</button>
                                <button id="resetTimer" class="btn btn-danger" onclick="resetTimer()">Sıfırla</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Screen -->
        <div id="notesScreen" class="hidden max-w-4xl mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">📝 Not Defteri</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Add Note -->
                    <div class="glass-card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-white">➕ Yeni Not</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium mb-2 text-white">Başlık</label>
                                <input type="text" id="noteTitle" class="input-field" placeholder="Not başlığı">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2 text-white">İçerik</label>
                                <textarea id="noteContent" class="input-field h-32 resize-none" placeholder="Not içeriği..."></textarea>
                            </div>
                            
                            <button onclick="addNote()" class="btn btn-success w-full">
                                ➕ Not Ekle
                            </button>
                        </div>
                    </div>
                    
                    <!-- Notes List -->
                    <div class="glass-card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-white">📋 Notlarım</h3>
                        <div id="notesList" class="space-y-3 max-h-96 overflow-y-auto">
                            <div class="text-center opacity-60 py-8 text-white">Henüz not eklenmedi</div>
                        </div>
                        <div class="mt-4">
                            <button onclick="clearAllNotes()" class="btn btn-danger w-full">
                                🗑️ Tüm Notları Sil
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calendar Screen -->
        <div id="calendarScreen" class="hidden max-w-4xl mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">📅 Takvim</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="glass-card p-6">
                    <div class="flex items-center justify-between mb-6">
                        <button onclick="previousMonth()" class="btn btn-primary">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                        </button>
                        <h3 id="calendarTitle" class="text-2xl font-semibold text-white"></h3>
                        <button onclick="nextMonth()" class="btn btn-primary">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </button>
                    </div>
                    
                    <!-- Calendar Header -->
                    <div class="calendar-grid mb-2">
                        <div class="text-center font-semibold text-white py-2">Pzt</div>
                        <div class="text-center font-semibold text-white py-2">Sal</div>
                        <div class="text-center font-semibold text-white py-2">Çar</div>
                        <div class="text-center font-semibold text-white py-2">Per</div>
                        <div class="text-center font-semibold text-white py-2">Cum</div>
                        <div class="text-center font-semibold text-white py-2">Cmt</div>
                        <div class="text-center font-semibold text-white py-2">Paz</div>
                    </div>
                    
                    <!-- Calendar Days -->
                    <div id="calendarDays" class="calendar-grid">
                        <!-- Calendar days will be generated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Password Generator Screen -->
        <div id="passwordScreen" class="hidden max-w-4xl mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">🔐 Şifre Önerme</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Password Generator -->
                    <div class="glass-card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-white">🎯 Şifre Oluştur</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium mb-2 text-white">Şifre Uzunluğu: <span id="lengthValue">12</span></label>
                                <input type="range" id="passwordLength" class="w-full" min="4" max="50" value="12" onchange="updateLength()">
                            </div>
                            
                            <div class="space-y-2">
                                <label class="flex items-center space-x-2 text-white">
                                    <input type="checkbox" id="includeUppercase" checked class="rounded">
                                    <span>Büyük harfler (A-Z)</span>
                                </label>
                                <label class="flex items-center space-x-2 text-white">
                                    <input type="checkbox" id="includeLowercase" checked class="rounded">
                                    <span>Küçük harfler (a-z)</span>
                                </label>
                                <label class="flex items-center space-x-2 text-white">
                                    <input type="checkbox" id="includeNumbers" checked class="rounded">
                                    <span>Sayılar (0-9)</span>
                                </label>
                                <label class="flex items-center space-x-2 text-white">
                                    <input type="checkbox" id="includeSymbols" class="rounded">
                                    <span>Semboller (!@#$%^&*)</span>
                                </label>
                            </div>
                            
                            <button onclick="generatePassword()" class="btn btn-success w-full">
                                🎲 Şifre Oluştur
                            </button>
                            
                            <div class="glass-card p-4">
                                <div class="text-sm font-medium mb-2 text-white">Oluşturulan Şifre:</div>
                                <div class="flex">
                                    <input type="text" id="generatedPassword" class="input-field flex-1 font-mono" readonly>
                                    <button onclick="copyPassword()" class="btn btn-primary ml-2">📋</button>
                                </div>
                                <div id="passwordStrength" class="password-strength mt-2"></div>
                                <div id="strengthText" class="text-sm mt-1 text-white"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Password Tips -->
                    <div class="glass-card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-white">💡 Güvenlik İpuçları</h3>
                        <div class="space-y-4 text-white">
                            <div class="glass-card p-4">
                                <h4 class="font-semibold mb-2">✅ Güçlü Şifre Özellikleri</h4>
                                <ul class="text-sm space-y-1 opacity-80">
                                    <li>• En az 12 karakter uzunluğunda</li>
                                    <li>• Büyük ve küçük harfler içerir</li>
                                    <li>• Sayılar ve semboller içerir</li>
                                    <li>• Tahmin edilmesi zor</li>
                                </ul>
                            </div>
                            
                            <div class="glass-card p-4">
                                <h4 class="font-semibold mb-2">❌ Kaçınılması Gerekenler</h4>
                                <ul class="text-sm space-y-1 opacity-80">
                                    <li>• Kişisel bilgiler (isim, doğum tarihi)</li>
                                    <li>• Sözlük kelimeleri</li>
                                    <li>• Basit sayı dizileri (123456)</li>
                                    <li>• Aynı şifreyi her yerde kullanma</li>
                                </ul>
                            </div>
                            
                            <div class="glass-card p-4">
                                <h4 class="font-semibold mb-2">🔒 Güvenlik Önerileri</h4>
                                <ul class="text-sm space-y-1 opacity-80">
                                    <li>• Her hesap için farklı şifre kullanın</li>
                                    <li>• Şifre yöneticisi kullanın</li>
                                    <li>• İki faktörlü doğrulama açın</li>
                                    <li>• Şifrelerinizi düzenli güncelleyin</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Database Screen -->
        <div id="databaseScreen" class="hidden max-w-6xl mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">🗄️ Yönetici Veri Tabanı</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <!-- Database Tabs -->
                <div class="flex space-x-4 mb-6 flex-wrap">
                    <button onclick="showDatabaseTab('messages')" id="messagesTab" class="btn btn-primary">📧 Mesajlar</button>
                    <button onclick="showDatabaseTab('chats')" id="chatsTab" class="btn btn-primary">🤖 Sohbetler</button>
                    <button onclick="showDatabaseTab('training')" id="trainingTab" class="btn btn-primary">🧠 Öğrenme Verileri</button>
                    <button onclick="showDatabaseTab('users')" id="usersTab" class="btn btn-primary">👥 Kullanıcılar</button>
                    <button onclick="showDatabaseTab('credentials')" id="credentialsTab" class="btn btn-primary">🔐 Kimlik Bilgileri</button>
                </div>
                
                <!-- Messages Tab -->
                <div id="messagesTabContent" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Support Messages -->
                    <div class="glass-card p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-xl font-semibold text-white">📧 Destek Mesajları</h3>
                            <button onclick="clearSupportMessages()" class="btn btn-danger btn-sm">
                                🗑️ Temizle
                            </button>
                        </div>
                        
                        <div id="supportMessagesList" class="space-y-3 max-h-96 overflow-y-auto">
                            <!-- Support messages will be loaded here -->
                        </div>
                    </div>
                    
                    <!-- System Updates -->
                    <div class="glass-card p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-xl font-semibold text-white">🔄 Sistem Güncellemeleri</h3>
                            <button onclick="clearSystemUpdates()" class="btn btn-danger btn-sm">
                                🗑️ Temizle
                            </button>
                        </div>
                        
                        <div id="systemUpdatesList" class="space-y-3 max-h-96 overflow-y-auto">
                            <!-- System updates will be loaded here -->
                        </div>
                    </div>
                </div>
                
                <!-- Chats Tab -->
                <div id="chatsTabContent" class="hidden">
                    <div class="glass-card p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-xl font-semibold text-white">🤖 AI Sohbet Kayıtları</h3>
                            <button onclick="clearChatLogs()" class="btn btn-danger btn-sm">
                                🗑️ Temizle
                            </button>
                        </div>
                        
                        <div id="chatLogsList" class="space-y-3 max-h-96 overflow-y-auto">
                            <!-- Chat logs will be loaded here -->
                        </div>
                    </div>
                </div>
                
                <!-- Training Tab -->
                <div id="trainingTabContent" class="hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Training Data List -->
                        <div class="glass-card p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-semibold text-white">🧠 Makine Öğrenmesi Verileri</h3>
                                <button onclick="clearTrainingData()" class="btn btn-danger btn-sm">
                                    🗑️ Temizle
                                </button>
                            </div>
                            
                            <div id="trainingDataList" class="space-y-3 max-h-96 overflow-y-auto">
                                <!-- Training data will be loaded here -->
                            </div>
                        </div>
                        
                        <!-- Bulk Training -->
                        <div class="glass-card p-6">
                            <h3 class="text-xl font-semibold text-white mb-4">📚 Toplu Öğrenme</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium mb-2 text-white">
                                        Toplu Öğrenme Verisi
                                        <span class="text-xs opacity-70 block mt-1">
                                            Format: "Soru: [soru metni]" ve "Cevap: [cevap metni]" şeklinde yazın
                                        </span>
                                    </label>
                                    <textarea id="bulkTrainingData" class="input-field h-64 resize-none font-mono text-sm" placeholder="Örnek:
Soru: Merhaba nasılsın?
Cevap: Merhaba! Ben İŞLEV asistanınızım, çok iyiyim teşekkür ederim.

Soru: Bugün hava nasıl?
Cevap: Hava durumu bilgisi için hava durumu uygulamasını kullanabilirsiniz.

Soru: Hesap makinesi nasıl kullanılır?
Cevap: Hesap makinesi uygulamasını açarak matematiksel işlemlerinizi yapabilirsiniz."></textarea>
                                </div>
                                
                                <div class="flex space-x-3">
                                    <button onclick="processBulkTraining()" class="btn btn-success flex-1">
                                        🧠 Toplu Öğret
                                    </button>
                                    <button onclick="clearBulkTraining()" class="btn btn-warning">
                                        🗑️ Temizle
                                    </button>
                                </div>
                                
                                <div id="bulkTrainingResult" class="text-sm text-center hidden">
                                    <!-- Results will be shown here -->
                                </div>
                                
                                <div class="glass-card p-4">
                                    <h4 class="font-semibold mb-2 text-white">💡 Kullanım Kılavuzu</h4>
                                    <ul class="text-sm space-y-1 opacity-80 text-white">
                                        <li>• Her soru "Soru:" ile başlamalı</li>
                                        <li>• Her cevap "Cevap:" ile başlamalı</li>
                                        <li>• Soru ve cevap çiftleri arasında boş satır bırakın</li>
                                        <li>• Türkçe karakterler desteklenir</li>
                                        <li>• Benzer sorular otomatik olarak eşleştirilir</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Credentials Tab -->
                <div id="credentialsTabContent" class="hidden">
                    <div class="glass-card p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-xl font-semibold text-white">🔐 Kullanıcı Kimlik Bilgileri</h3>
                            <button onclick="clearCredentials()" class="btn btn-danger btn-sm">
                                🗑️ Temizle
                            </button>
                        </div>
                        
                        <div id="credentialsDisplay" class="space-y-3 max-h-96 overflow-y-auto">
                            <!-- Credentials will be loaded here -->
                        </div>
                    </div>
                </div>
                
                <!-- Users Tab -->
                <div id="usersTabContent" class="hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Active Users -->
                        <div class="glass-card p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-semibold text-white">🟢 Aktif Kullanıcılar</h3>
                                <button onclick="refreshActiveUsers()" class="btn btn-success btn-sm">
                                    🔄 Yenile
                                </button>
                            </div>
                            
                            <div id="activeUsersDisplay" class="space-y-3 max-h-96 overflow-y-auto">
                                <!-- Active users will be loaded here -->
                            </div>
                        </div>
                        
                        <!-- User Database -->
                        <div class="glass-card p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-semibold text-white">📊 Kullanıcı Veritabanı</h3>
                                <button onclick="clearUserDatabase()" class="btn btn-danger btn-sm">
                                    🗑️ Temizle
                                </button>
                            </div>
                            
                            <div id="userDatabaseDisplay" class="space-y-3 max-h-96 overflow-y-auto">
                                <!-- User database will be loaded here -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- User Statistics -->
                    <div class="glass-card p-6 mt-6">
                        <h3 class="text-xl font-semibold mb-4 text-white">📈 Kullanıcı İstatistikleri</h3>
                        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
                            <div class="glass-card p-4 text-center">
                                <div class="text-2xl mb-2">👥</div>
                                <div class="text-lg font-bold text-white" id="totalUsers">0</div>
                                <div class="text-sm opacity-80 text-white">Toplam Kullanıcı</div>
                            </div>
                            <div class="glass-card p-4 text-center">
                                <div class="text-2xl mb-2">🟢</div>
                                <div class="text-lg font-bold text-white" id="currentActiveUsers">0</div>
                                <div class="text-sm opacity-80 text-white">Aktif Kullanıcı</div>
                            </div>
                            <div class="glass-card p-4 text-center">
                                <div class="text-2xl mb-2">📅</div>
                                <div class="text-lg font-bold text-white" id="todayLogins">0</div>
                                <div class="text-sm opacity-80 text-white">Bugün Giriş</div>
                            </div>
                            <div class="glass-card p-4 text-center">
                                <div class="text-2xl mb-2">📝</div>
                                <div class="text-lg font-bold text-white" id="averageSession">0/3</div>
                                <div class="text-sm opacity-80 text-white">Kayıtlı Kullanıcı</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Statistics -->
                <div class="glass-card p-6 mt-6">
                    <h3 class="text-xl font-semibold mb-4 text-white">📊 İstatistikler</h3>
                    <div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
                        <div class="glass-card p-4 text-center">
                            <div class="text-2xl mb-2">📧</div>
                            <div class="text-lg font-bold text-white" id="totalSupport">0</div>
                            <div class="text-sm opacity-80 text-white">Toplam Destek</div>
                        </div>
                        <div class="glass-card p-4 text-center">
                            <div class="text-2xl mb-2">💡</div>
                            <div class="text-lg font-bold text-white" id="totalSuggestions">0</div>
                            <div class="text-sm opacity-80 text-white">Öneriler</div>
                        </div>
                        <div class="glass-card p-4 text-center">
                            <div class="text-2xl mb-2">😞</div>
                            <div class="text-lg font-bold text-white" id="totalComplaints">0</div>
                            <div class="text-sm opacity-80 text-white">Şikayetler</div>
                        </div>
                        <div class="glass-card p-4 text-center">
                            <div class="text-2xl mb-2">🤖</div>
                            <div class="text-lg font-bold text-white" id="totalChats">0</div>
                            <div class="text-sm opacity-80 text-white">AI Sohbetler</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Snake Game Screen -->
        <div id="snakeScreen" class="hidden max-w-2xl mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">🐍 Snake Oyunu</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="text-center mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <div class="text-white">
                            <div class="text-lg font-semibold">Skor: <span id="snakeScore">0</span></div>
                            <div class="text-sm opacity-80">En Yüksek: <span id="snakeHighScore">0</span></div>
                        </div>
                        <div class="flex space-x-2">
                            <button id="snakeStartBtn" onclick="startSnakeGame()" class="btn btn-success">🎮 Başla</button>
                            <button id="snakePauseBtn" onclick="pauseSnakeGame()" class="btn btn-warning hidden">⏸️ Duraklat</button>
                            <button onclick="resetSnakeGame()" class="btn btn-danger">🔄 Yenile</button>
                        </div>
                    </div>
                    
                    <div id="snakeBoard" class="game-board mx-auto" style="grid-template-columns: repeat(20, 1fr); width: 400px; height: 400px;">
                        <!-- Snake game board will be generated here -->
                    </div>
                    
                    <div class="mt-4 text-white text-sm opacity-80">
                        <p>🎮 Yön tuşları ile oynayın | 🍎 Kırmızı yemi toplayın | 🐍 Kenarlara ve kendi vücudunuza çarpmayın</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2048 Game Screen -->
        <div id="game2048Screen" class="hidden max-w-2xl mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">🔢 2048 Oyunu</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="text-center mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <div class="text-white">
                            <div class="text-lg font-semibold">Skor: <span id="game2048Score">0</span></div>
                            <div class="text-sm opacity-80">En Yüksek: <span id="game2048HighScore">0</span></div>
                        </div>
                        <button onclick="resetGame2048()" class="btn btn-success">🔄 Yeni Oyun</button>
                    </div>
                    
                    <div id="game2048Board" class="game-board mx-auto" style="grid-template-columns: repeat(4, 1fr); width: 320px; height: 320px;">
                        <!-- 2048 game board will be generated here -->
                    </div>
                    
                    <div class="mt-4 text-white text-sm opacity-80">
                        <p>🎮 Yön tuşları ile oynayın | 🎯 Aynı sayıları birleştirin | 🏆 2048'e ulaşmaya çalışın</p>
                    </div>
                    
                    <div id="game2048Message" class="mt-4 text-center text-white font-semibold hidden"></div>
                </div>
            </div>
        </div>

        <!-- Memory Game Screen -->
        <div id="memoryScreen" class="hidden max-w-2xl mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">🧠 Hafıza Oyunu</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="text-center mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <div class="text-white">
                            <div class="text-lg font-semibold">Hamle: <span id="memoryMoves">0</span></div>
                            <div class="text-sm opacity-80">Eşleşen: <span id="memoryMatched">0</span>/8</div>
                        </div>
                        <button onclick="resetMemoryGame()" class="btn btn-success">🔄 Yeni Oyun</button>
                    </div>
                    
                    <div id="memoryBoard" class="game-board mx-auto" style="grid-template-columns: repeat(4, 1fr); width: 320px; height: 320px;">
                        <!-- Memory game board will be generated here -->
                    </div>
                    
                    <div class="mt-4 text-white text-sm opacity-80">
                        <p>🎮 Kartlara tıklayın | 🎯 Aynı emojileri eşleştirin | 🧠 En az hamle ile bitirin</p>
                    </div>
                    
                    <div id="memoryMessage" class="mt-4 text-center text-white font-semibold hidden"></div>
                </div>
            </div>
        </div>

        <!-- Tic Tac Toe Screen -->
        <div id="tictactoeScreen" class="hidden max-w-2xl mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">⭕ XOX Oyunu</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="text-center mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <div class="text-white">
                            <div class="text-lg font-semibold">Sıra: <span id="tttCurrentPlayer">X</span></div>
                            <div class="text-sm opacity-80">Oyuncu vs Bilgisayar</div>
                        </div>
                        <button onclick="resetTicTacToe()" class="btn btn-success">🔄 Yeni Oyun</button>
                    </div>
                    
                    <div id="tttBoard" class="game-board mx-auto" style="grid-template-columns: repeat(3, 1fr); width: 300px; height: 300px;">
                        <!-- Tic Tac Toe board will be generated here -->
                    </div>
                    
                    <div class="mt-4 text-white text-sm opacity-80">
                        <p>🎮 Boş alanlara tıklayın | ⭕ Siz X, bilgisayar O | 🏆 3 tane yan yana dizin</p>
                    </div>
                    
                    <div id="tttMessage" class="mt-4 text-center text-white font-semibold hidden"></div>
                </div>
            </div>
        </div>

        <!-- QR Code Screen -->
        <div id="qrcodeScreen" class="hidden max-w-4xl mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">📱 QR Kod Oluşturucu</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- QR Code Generator -->
                    <div class="glass-card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-white">🔧 QR Kod Oluştur</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium mb-2 text-white">QR Kod Türü</label>
                                <select id="qrType" class="input-field" onchange="updateQRInputs()">
                                    <option value="text">📝 Metin</option>
                                    <option value="url">🌐 Web Sitesi (URL)</option>
                                    <option value="wifi">📶 WiFi Şifresi</option>
                                    <option value="email">📧 E-posta</option>
                                    <option value="phone">📞 Telefon</option>
                                </select>
                            </div>
                            
                            <div id="qrInputs">
                                <div>
                                    <label class="block text-sm font-medium mb-2 text-white">Metin</label>
                                    <textarea id="qrText" class="input-field h-24 resize-none" placeholder="QR koda dönüştürülecek metni yazın..."></textarea>
                                </div>
                            </div>
                            
                            <button onclick="generateQRCode()" class="btn btn-success w-full">
                                📱 QR Kod Oluştur
                            </button>
                        </div>
                    </div>
                    
                    <!-- QR Code Display -->
                    <div class="glass-card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-white">📱 Oluşturulan QR Kod</h3>
                        <div class="text-center">
                            <div id="qrCodeDisplay" class="bg-white p-4 rounded-lg mb-4 min-h-[200px] flex items-center justify-center">
                                <div class="text-gray-500">QR kod burada görünecek</div>
                            </div>
                            <button onclick="downloadQRCode()" id="downloadQRBtn" class="btn btn-primary hidden">
                                💾 İndir
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Unit Converter Screen -->
        <div id="converterScreen" class="hidden max-w-4xl mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">🔄 Birim Dönüştürücü</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Length Converter -->
                    <div class="converter-section">
                        <h3 class="text-lg font-semibold mb-4 text-white">📏 Uzunluk</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <input type="number" id="lengthFrom" class="input-field" placeholder="0" oninput="convertLength()">
                                <select id="lengthFromUnit" class="input-field mt-2" onchange="convertLength()">
                                    <option value="mm">Milimetre</option>
                                    <option value="cm">Santimetre</option>
                                    <option value="m" selected>Metre</option>
                                    <option value="km">Kilometre</option>
                                    <option value="in">İnç</option>
                                    <option value="ft">Feet</option>
                                    <option value="yd">Yard</option>
                                    <option value="mi">Mil</option>
                                </select>
                            </div>
                            <div>
                                <input type="number" id="lengthTo" class="input-field" placeholder="0" readonly>
                                <select id="lengthToUnit" class="input-field mt-2" onchange="convertLength()">
                                    <option value="mm">Milimetre</option>
                                    <option value="cm" selected>Santimetre</option>
                                    <option value="m">Metre</option>
                                    <option value="km">Kilometre</option>
                                    <option value="in">İnç</option>
                                    <option value="ft">Feet</option>
                                    <option value="yd">Yard</option>
                                    <option value="mi">Mil</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Weight Converter -->
                    <div class="converter-section">
                        <h3 class="text-lg font-semibold mb-4 text-white">⚖️ Ağırlık</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <input type="number" id="weightFrom" class="input-field" placeholder="0" oninput="convertWeight()">
                                <select id="weightFromUnit" class="input-field mt-2" onchange="convertWeight()">
                                    <option value="mg">Miligram</option>
                                    <option value="g">Gram</option>
                                    <option value="kg" selected>Kilogram</option>
                                    <option value="t">Ton</option>
                                    <option value="oz">Ons</option>
                                    <option value="lb">Pound</option>
                                </select>
                            </div>
                            <div>
                                <input type="number" id="weightTo" class="input-field" placeholder="0" readonly>
                                <select id="weightToUnit" class="input-field mt-2" onchange="convertWeight()">
                                    <option value="mg">Miligram</option>
                                    <option value="g" selected>Gram</option>
                                    <option value="kg">Kilogram</option>
                                    <option value="t">Ton</option>
                                    <option value="oz">Ons</option>
                                    <option value="lb">Pound</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Temperature Converter -->
                    <div class="converter-section">
                        <h3 class="text-lg font-semibold mb-4 text-white">🌡️ Sıcaklık</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <input type="number" id="tempFrom" class="input-field" placeholder="0" oninput="convertTemperature()">
                                <select id="tempFromUnit" class="input-field mt-2" onchange="convertTemperature()">
                                    <option value="c" selected>Celsius (°C)</option>
                                    <option value="f">Fahrenheit (°F)</option>
                                    <option value="k">Kelvin (K)</option>
                                </select>
                            </div>
                            <div>
                                <input type="number" id="tempTo" class="input-field" placeholder="0" readonly>
                                <select id="tempToUnit" class="input-field mt-2" onchange="convertTemperature()">
                                    <option value="c">Celsius (°C)</option>
                                    <option value="f" selected>Fahrenheit (°F)</option>
                                    <option value="k">Kelvin (K)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Currency Converter -->
                    <div class="converter-section">
                        <h3 class="text-lg font-semibold mb-4 text-white">💰 Para Birimi</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <input type="number" id="currencyFrom" class="input-field" placeholder="0" oninput="convertCurrency()">
                                <select id="currencyFromUnit" class="input-field mt-2" onchange="convertCurrency()">
                                    <option value="try" selected>Türk Lirası (₺)</option>
                                    <option value="usd">Amerikan Doları ($)</option>
                                    <option value="eur">Euro (€)</option>
                                    <option value="gbp">İngiliz Sterlini (£)</option>
                                    <option value="jpy">Japon Yeni (¥)</option>
                                </select>
                            </div>
                            <div>
                                <input type="number" id="currencyTo" class="input-field" placeholder="0" readonly>
                                <select id="currencyToUnit" class="input-field mt-2" onchange="convertCurrency()">
                                    <option value="try">Türk Lirası (₺)</option>
                                    <option value="usd" selected>Amerikan Doları ($)</option>
                                    <option value="eur">Euro (€)</option>
                                    <option value="gbp">İngiliz Sterlini (£)</option>
                                    <option value="jpy">Japon Yeni (¥)</option>
                                </select>
                            </div>
                        </div>
                        <div class="text-xs text-white opacity-60 mt-2">
                            * Döviz kurları simüle edilmiştir, gerçek kurlar için bankalardan bilgi alın.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Color Tools Screen -->
        <div id="colortoolsScreen" class="hidden max-w-4xl mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">🎨 Renk Araçları</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Color Picker -->
                    <div class="glass-card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-white">🎨 Renk Seçici</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium mb-2 text-white">Renk Seçin</label>
                                <input type="color" id="colorPicker" class="w-full h-12 rounded-lg border-2 border-white/30" value="#667eea" onchange="updateColorValues()">
                            </div>
                            
                            <div class="color-preview" id="colorPreview" style="background-color: #667eea;"></div>
                            
                            <div class="grid grid-cols-1 gap-3">
                                <div>
                                    <label class="block text-sm font-medium mb-1 text-white">HEX</label>
                                    <input type="text" id="hexValue" class="input-field font-mono" value="#667eea" onchange="updateFromHex()">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1 text-white">RGB</label>
                                    <input type="text" id="rgbValue" class="input-field font-mono" readonly>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1 text-white">HSL</label>
                                    <input type="text" id="hslValue" class="input-field font-mono" readonly>
                                </div>
                            </div>
                            
                            <button onclick="copyColorValue()" class="btn btn-success w-full">
                                📋 HEX Değerini Kopyala
                            </button>
                        </div>
                    </div>
                    
                    <!-- Color Palette -->
                    <div class="glass-card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-white">🎨 Renk Paleti</h3>
                        <div class="space-y-4">
                            <div>
                                <h4 class="text-sm font-medium mb-2 text-white">Popüler Renkler</h4>
                                <div class="grid grid-cols-6 gap-2">
                                    <div class="color-picker" style="background-color: #ff0000;" onclick="selectColor('#ff0000')" title="Kırmızı"></div>
                                    <div class="color-picker" style="background-color: #00ff00;" onclick="selectColor('#00ff00')" title="Yeşil"></div>
                                    <div class="color-picker" style="background-color: #0000ff;" onclick="selectColor('#0000ff')" title="Mavi"></div>
                                    <div class="color-picker" style="background-color: #ffff00;" onclick="selectColor('#ffff00')" title="Sarı"></div>
                                    <div class="color-picker" style="background-color: #ff00ff;" onclick="selectColor('#ff00ff')" title="Magenta"></div>
                                    <div class="color-picker" style="background-color: #00ffff;" onclick="selectColor('#00ffff')" title="Cyan"></div>
                                </div>
                            </div>
                            
                            <div>
                                <h4 class="text-sm font-medium mb-2 text-white">Gri Tonları</h4>
                                <div class="grid grid-cols-6 gap-2">
                                    <div class="color-picker" style="background-color: #000000;" onclick="selectColor('#000000')" title="Siyah"></div>
                                    <div class="color-picker" style="background-color: #333333;" onclick="selectColor('#333333')" title="Koyu Gri"></div>
                                    <div class="color-picker" style="background-color: #666666;" onclick="selectColor('#666666')" title="Gri"></div>
                                    <div class="color-picker" style="background-color: #999999;" onclick="selectColor('#999999')" title="Açık Gri"></div>
                                    <div class="color-picker" style="background-color: #cccccc;" onclick="selectColor('#cccccc')" title="Çok Açık Gri"></div>
                                    <div class="color-picker" style="background-color: #ffffff;" onclick="selectColor('#ffffff')" title="Beyaz"></div>
                                </div>
                            </div>
                            
                            <div>
                                <h4 class="text-sm font-medium mb-2 text-white">Pastel Renkler</h4>
                                <div class="grid grid-cols-6 gap-2">
                                    <div class="color-picker" style="background-color: #ffb3ba;" onclick="selectColor('#ffb3ba')" title="Pastel Kırmızı"></div>
                                    <div class="color-picker" style="background-color: #ffdfba;" onclick="selectColor('#ffdfba')" title="Pastel Turuncu"></div>
                                    <div class="color-picker" style="background-color: #ffffba;" onclick="selectColor('#ffffba')" title="Pastel Sarı"></div>
                                    <div class="color-picker" style="background-color: #baffc9;" onclick="selectColor('#baffc9')" title="Pastel Yeşil"></div>
                                    <div class="color-picker" style="background-color: #bae1ff;" onclick="selectColor('#bae1ff')" title="Pastel Mavi"></div>
                                    <div class="color-picker" style="background-color: #e1baff;" onclick="selectColor('#e1baff')" title="Pastel Mor"></div>
                                </div>
                            </div>
                            
                            <button onclick="generateRandomColor()" class="btn btn-primary w-full">
                                🎲 Rastgele Renk
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Text Tools Screen -->
        <div id="texttoolsScreen" class="hidden max-w-4xl mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">📝 Metin Araçları</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Text Input -->
                    <div class="glass-card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-white">✏️ Metin Girişi</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium mb-2 text-white">Metninizi Yazın</label>
                                <textarea id="textInput" class="input-field h-64 resize-none" placeholder="Buraya metninizi yazın..." oninput="analyzeText()"></textarea>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <button onclick="clearText()" class="btn btn-danger">
                                    🗑️ Temizle
                                </button>
                                <button onclick="copyText()" class="btn btn-success">
                                    📋 Kopyala
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Text Analysis & Tools -->
                    <div class="glass-card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-white">📊 Metin Analizi</h3>
                        <div class="space-y-4">
                            <!-- Statistics -->
                            <div class="grid grid-cols-2 gap-4">
                                <div class="glass-card p-3 text-center">
                                    <div class="text-lg font-bold text-white" id="charCount">0</div>
                                    <div class="text-sm opacity-80 text-white">Karakter</div>
                                </div>
                                <div class="glass-card p-3 text-center">
                                    <div class="text-lg font-bold text-white" id="wordCount">0</div>
                                    <div class="text-sm opacity-80 text-white">Kelime</div>
                                </div>
                                <div class="glass-card p-3 text-center">
                                    <div class="text-lg font-bold text-white" id="lineCount">0</div>
                                    <div class="text-sm opacity-80 text-white">Satır</div>
                                </div>
                                <div class="glass-card p-3 text-center">
                                    <div class="text-lg font-bold text-white" id="paragraphCount">0</div>
                                    <div class="text-sm opacity-80 text-white">Paragraf</div>
                                </div>
                            </div>
                            
                            <!-- Text Transformations -->
                            <div class="space-y-2">
                                <h4 class="text-sm font-medium text-white">🔄 Metin Dönüştürme</h4>
                                <div class="grid grid-cols-2 gap-2">
                                    <button onclick="transformText('uppercase')" class="btn btn-primary btn-sm">
                                        BÜYÜK HARF
                                    </button>
                                    <button onclick="transformText('lowercase')" class="btn btn-primary btn-sm">
                                        küçük harf
                                    </button>
                                    <button onclick="transformText('capitalize')" class="btn btn-primary btn-sm">
                                        İlk Harfler Büyük
                                    </button>
                                    <button onclick="transformText('reverse')" class="btn btn-primary btn-sm">
                                        sretH esreveR
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Text Utilities -->
                            <div class="space-y-2">
                                <h4 class="text-sm font-medium text-white">🛠️ Metin Araçları</h4>
                                <div class="grid grid-cols-1 gap-2">
                                    <button onclick="removeExtraSpaces()" class="btn btn-warning btn-sm">
                                        Fazla Boşlukları Kaldır
                                    </button>
                                    <button onclick="removeLineBreaks()" class="btn btn-warning btn-sm">
                                        Satır Sonlarını Kaldır
                                    </button>
                                    <button onclick="addLineNumbers()" class="btn btn-warning btn-sm">
                                        Satır Numaraları Ekle
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Weather Screen -->
        <div id="weatherScreen" class="hidden max-w-4xl mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">🌤️ Hava Durumu</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Current Weather -->
                    <div class="glass-card p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold text-white">🌍 Güncel Hava</h3>
                            <div class="flex space-x-2">
                                <input type="text" id="cityInput" class="input-field w-32" placeholder="Şehir">
                                <button onclick="getWeather()" class="btn btn-primary">🔍</button>
                            </div>
                        </div>
                        
                        <div class="weather-card text-white">
                            <div id="weatherLocation" class="text-2xl font-semibold mb-2">İstanbul, TR</div>
                            <div id="weatherIcon" class="weather-icon">☀️</div>
                            <div id="weatherTemp" class="weather-temp">22°C</div>
                            <div id="weatherDescription" class="text-lg mb-4">Açık</div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div class="glass-card p-3 text-center">
                                    <div class="text-sm opacity-80">Hissedilen</div>
                                    <div id="feelsLike" class="font-bold">24°C</div>
                                </div>
                                <div class="glass-card p-3 text-center">
                                    <div class="text-sm opacity-80">Nem</div>
                                    <div id="humidity" class="font-bold">65%</div>
                                </div>
                                <div class="glass-card p-3 text-center">
                                    <div class="text-sm opacity-80">Rüzgar</div>
                                    <div id="windSpeed" class="font-bold">12 km/h</div>
                                </div>
                                <div class="glass-card p-3 text-center">
                                    <div class="text-sm opacity-80">Basınç</div>
                                    <div id="pressure" class="font-bold">1013 hPa</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 5-Day Forecast -->
                    <div class="glass-card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-white">📅 5 Günlük Tahmin</h3>
                        <div id="forecast" class="space-y-3">
                            <div class="glass-card p-3 flex justify-between items-center">
                                <div>
                                    <div class="font-medium text-white">Bugün</div>
                                    <div class="text-sm opacity-60 text-white">Açık</div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-2xl">☀️</span>
                                    <span class="font-bold text-white">22°/15°</span>
                                </div>
                            </div>
                            
                            <div class="glass-card p-3 flex justify-between items-center">
                                <div>
                                    <div class="font-medium text-white">Yarın</div>
                                    <div class="text-sm opacity-60 text-white">Parçalı Bulutlu</div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-2xl">⛅</span>
                                    <span class="font-bold text-white">20°/13°</span>
                                </div>
                            </div>
                            
                            <div class="glass-card p-3 flex justify-between items-center">
                                <div>
                                    <div class="font-medium text-white">Cumartesi</div>
                                    <div class="text-sm opacity-60 text-white">Yağmurlu</div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-2xl">🌧️</span>
                                    <span class="font-bold text-white">18°/11°</span>
                                </div>
                            </div>
                            
                            <div class="glass-card p-3 flex justify-between items-center">
                                <div>
                                    <div class="font-medium text-white">Pazar</div>
                                    <div class="text-sm opacity-60 text-white">Bulutlu</div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-2xl">☁️</span>
                                    <span class="font-bold text-white">19°/12°</span>
                                </div>
                            </div>
                            
                            <div class="glass-card p-3 flex justify-between items-center">
                                <div>
                                    <div class="font-medium text-white">Pazartesi</div>
                                    <div class="text-sm opacity-60 text-white">Açık</div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-2xl">☀️</span>
                                    <span class="font-bold text-white">23°/16°</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pomodoro Timer Screen -->
        <div id="pomodoroScreen" class="hidden max-w-2xl mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">🍅 Pomodoro Timer</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="text-center mb-8">
                    <div class="pomodoro-circle mb-6">
                        <div class="pomodoro-progress" id="pomodoroProgress"></div>
                        <div class="text-center">
                            <div id="pomodoroTime" class="text-4xl font-mono font-bold text-white">25:00</div>
                            <div id="pomodoroPhase" class="text-sm opacity-80 text-white">Çalışma Zamanı</div>
                        </div>
                    </div>
                    
                    <div class="flex justify-center space-x-4 mb-6">
                        <button id="pomodoroStartBtn" onclick="startPomodoro()" class="btn btn-success">
                            ▶️ Başla
                        </button>
                        <button id="pomodoroPauseBtn" onclick="pausePomodoro()" class="btn btn-warning hidden">
                            ⏸️ Duraklat
                        </button>
                        <button onclick="resetPomodoro()" class="btn btn-danger">
                            🔄 Sıfırla
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-3 gap-4 mb-6">
                        <div class="glass-card p-3 text-center">
                            <div class="text-lg font-bold text-white" id="pomodoroSessions">0</div>
                            <div class="text-sm opacity-80 text-white">Tamamlanan</div>
                        </div>
                        <div class="glass-card p-3 text-center">
                            <div class="text-lg font-bold text-white" id="pomodoroTotal">0</div>
                            <div class="text-sm opacity-80 text-white">Toplam Dakika</div>
                        </div>
                        <div class="glass-card p-3 text-center">
                            <div class="text-lg font-bold text-white" id="pomodoroStreak">0</div>
                            <div class="text-sm opacity-80 text-white">Seri</div>
                        </div>
                    </div>
                    
                    <div class="text-white text-sm opacity-80">
                        <p>🍅 25 dakika çalış, 5 dakika mola ver</p>
                        <p>🎯 4 pomodoro sonrası 15-30 dakika uzun mola</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Todo List Screen -->
        <div id="todolistScreen" class="hidden max-w-4xl mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">✅ Görev Listesi</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Add Todo -->
                    <div class="glass-card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-white">➕ Yeni Görev</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium mb-2 text-white">Görev</label>
                                <input type="text" id="todoInput" class="input-field" placeholder="Yapılacak görevi yazın..." onkeypress="handleTodoKeyPress(event)">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2 text-white">Öncelik</label>
                                <select id="todoPriority" class="input-field">
                                    <option value="low">🟢 Düşük</option>
                                    <option value="medium" selected>🟡 Orta</option>
                                    <option value="high">🔴 Yüksek</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2 text-white">Kategori</label>
                                <select id="todoCategory" class="input-field">
                                    <option value="personal">👤 Kişisel</option>
                                    <option value="work">💼 İş</option>
                                    <option value="study">📚 Eğitim</option>
                                    <option value="health">🏥 Sağlık</option>
                                    <option value="other">📝 Diğer</option>
                                </select>
                            </div>
                            
                            <button onclick="addTodo()" class="btn btn-success w-full">
                                ➕ Görev Ekle
                            </button>
                        </div>
                    </div>
                    
                    <!-- Todo List -->
                    <div class="glass-card p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-xl font-semibold text-white">📋 Görevlerim</h3>
                            <div class="flex space-x-2">
                                <select id="todoFilter" class="input-field text-sm" onchange="filterTodos()">
                                    <option value="all">Tümü</option>
                                    <option value="pending">Bekleyen</option>
                                    <option value="completed">Tamamlanan</option>
                                    <option value="high">Yüksek Öncelik</option>
                                </select>
                                <button onclick="clearCompletedTodos()" class="btn btn-danger btn-sm">
                                    🗑️ Temizle
                                </button>
                            </div>
                        </div>
                        
                        <div id="todoList" class="space-y-2 max-h-96 overflow-y-auto">
                            <div class="text-center opacity-60 py-8 text-white">Henüz görev eklenmedi</div>
                        </div>
                        
                        <div class="mt-4 grid grid-cols-3 gap-4">
                            <div class="glass-card p-3 text-center">
                                <div class="text-lg font-bold text-white" id="todoTotal">0</div>
                                <div class="text-sm opacity-80 text-white">Toplam</div>
                            </div>
                            <div class="glass-card p-3 text-center">
                                <div class="text-lg font-bold text-white" id="todoPending">0</div>
                                <div class="text-sm opacity-80 text-white">Bekleyen</div>
                            </div>
                            <div class="glass-card p-3 text-center">
                                <div class="text-lg font-bold text-white" id="todoCompleted">0</div>
                                <div class="text-sm opacity-80 text-white">Tamamlanan</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Habits Tracker Screen -->
        <div id="habitsScreen" class="hidden max-w-4xl mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">📈 Alışkanlık Takibi</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Add Habit -->
                    <div class="glass-card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-white">➕ Yeni Alışkanlık</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium mb-2 text-white">Alışkanlık Adı</label>
                                <input type="text" id="habitInput" class="input-field" placeholder="Örn: Su içmek, Egzersiz yapmak..." onkeypress="handleHabitKeyPress(event)">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2 text-white">Emoji</label>
                                <select id="habitEmoji" class="input-field">
                                    <option value="💧">💧 Su İçmek</option>
                                    <option value="🏃">🏃 Koşmak</option>
                                    <option value="📚">📚 Kitap Okumak</option>
                                    <option value="🧘">🧘 Meditasyon</option>
                                    <option value="💪">💪 Egzersiz</option>
                                    <option value="🥗">🥗 Sağlıklı Beslenme</option>
                                    <option value="😴">😴 Erken Yatmak</option>
                                    <option value="🌅">🌅 Erken Kalkmak</option>
                                    <option value="✍️">✍️ Günlük Yazmak</option>
                                    <option value="🎯">🎯 Hedef Çalışmak</option>
                                </select>
                            </div>
                            
                            <button onclick="addHabit()" class="btn btn-success w-full">
                                ➕ Alışkanlık Ekle
                            </button>
                        </div>
                    </div>
                    
                    <!-- Habits List -->
                    <div class="glass-card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-white">📊 Alışkanlıklarım</h3>
                        <div id="habitsList" class="space-y-4 max-h-96 overflow-y-auto">
                            <div class="text-center opacity-60 py-8 text-white">Henüz alışkanlık eklenmedi</div>
                        </div>
                        
                        <div class="mt-4">
                            <button onclick="clearAllHabits()" class="btn btn-danger w-full">
                                🗑️ Tüm Alışkanlıkları Sil
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Goals Tracker Screen -->
        <div id="goalsScreen" class="hidden max-w-4xl mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">🎯 Hedef Takibi</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Add Goal -->
                    <div class="glass-card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-white">➕ Yeni Hedef</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium mb-2 text-white">Hedef Adı</label>
                                <input type="text" id="goalTitle" class="input-field" placeholder="Hedef başlığı..." onkeypress="handleGoalKeyPress(event)">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2 text-white">Açıklama</label>
                                <textarea id="goalDescription" class="input-field h-24 resize-none" placeholder="Hedef açıklaması..."></textarea>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium mb-2 text-white">Hedef Değer</label>
                                    <input type="number" id="goalTarget" class="input-field" placeholder="100" min="1">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2 text-white">Birim</label>
                                    <select id="goalUnit" class="input-field">
                                        <option value="adet">Adet</option>
                                        <option value="gün">Gün</option>
                                        <option value="saat">Saat</option>
                                        <option value="kg">Kilogram</option>
                                        <option value="km">Kilometre</option>
                                        <option value="sayfa">Sayfa</option>
                                        <option value="kez">Kez</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2 text-white">Kategori</label>
                                <select id="goalCategory" class="input-field">
                                    <option value="health">🏥 Sağlık</option>
                                    <option value="fitness">💪 Fitness</option>
                                    <option value="education">📚 Eğitim</option>
                                    <option value="career">💼 Kariyer</option>
                                    <option value="personal">👤 Kişisel</option>
                                    <option value="financial">💰 Mali</option>
                                </select>
                            </div>
                            
                            <button onclick="addGoal()" class="btn btn-success w-full">
                                🎯 Hedef Ekle
                            </button>
                        </div>
                    </div>
                    
                    <!-- Goals List -->
                    <div class="glass-card p-6">
                        <h3 class="text-xl font-semibold mb-4 text-white">📊 Hedeflerim</h3>
                        <div id="goalsList" class="space-y-4 max-h-96 overflow-y-auto">
                            <div class="text-center opacity-60 py-8 text-white">Henüz hedef eklenmedi</div>
                        </div>
                        
                        <div class="mt-4">
                            <button onclick="clearAllGoals()" class="btn btn-danger w-full">
                                🗑️ Tüm Hedefleri Sil
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Drawing Board Screen -->
        <div id="drawingScreen" class="hidden max-w-6xl mx-auto screen-transition">
            <div class="glass-card p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-semibold text-white">🖌️ Çizim Tahtası</h2>
                    <button onclick="goHome()" class="btn btn-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                    <!-- Drawing Tools -->
                    <div class="glass-card p-6">
                        <h3 class="text-lg font-semibold mb-4 text-white">🛠️ Araçlar</h3>
                        <div class="space-y-4">
                            <!-- Brush Size -->
                            <div>
                                <label class="block text-sm font-medium mb-2 text-white">Fırça Boyutu: <span id="brushSizeValue">5</span>px</label>
                                <input type="range" id="brushSize" class="w-full" min="1" max="50" value="5" onchange="updateBrushSize()">
                            </div>
                            
                            <!-- Colors -->
                            <div>
                                <label class="block text-sm font-medium mb-2 text-white">Renkler</label>
                                <div class="grid grid-cols-4 gap-2">
                                    <div class="color-picker active" style="background-color: #000000;" onclick="selectDrawingColor('#000000')" data-color="#000000"></div>
                                    <div class="color-picker" style="background-color: #ff0000;" onclick="selectDrawingColor('#ff0000')" data-color="#ff0000"></div>
                                    <div class="color-picker" style="background-color: #00ff00;" onclick="selectDrawingColor('#00ff00')" data-color="#00ff00"></div>
                                    <div class="color-picker" style="background-color: #0000ff;" onclick="selectDrawingColor('#0000ff')" data-color="#0000ff"></div>
                                    <div class="color-picker" style="background-color: #ffff00;" onclick="selectDrawingColor('#ffff00')" data-color="#ffff00"></div>
                                    <div class="color-picker" style="background-color: #ff00ff;" onclick="selectDrawingColor('#ff00ff')" data-color="#ff00ff"></div>
                                    <div class="color-picker" style="background-color: #00ffff;" onclick="selectDrawingColor('#00ffff')" data-color="#00ffff"></div>
                                    <div class="color-picker" style="background-color: #ffffff;" onclick="selectDrawingColor('#ffffff')" data-color="#ffffff"></div>
                                    <div class="color-picker" style="background-color: #808080;" onclick="selectDrawingColor('#808080')" data-color="#808080"></div>
                                    <div class="color-picker" style="background-color: #800000;" onclick="selectDrawingColor('#800000')" data-color="#800000"></div>
                                    <div class="color-picker" style="background-color: #008000;" onclick="selectDrawingColor('#008000')" data-color="#008000"></div>
                                    <div class="color-picker" style="background-color: #000080;" onclick="selectDrawingColor('#000080')" data-color="#000080"></div>
                                </div>
                            </div>
                            
                            <!-- Custom Color -->
                            <div>
                                <label class="block text-sm font-medium mb-2 text-white">Özel Renk</label>
                                <input type="color" id="customColor" class="w-full h-10 rounded-lg border-2 border-white/30" onchange="selectDrawingColor(this.value)">
                            </div>
                            
                            <!-- Tools -->
                            <div class="space-y-2">
                                <button id="brushTool" onclick="selectTool('brush')" class="btn btn-primary w-full active">
                                    🖌️ Fırça
                                </button>
                                <button id="eraserTool" onclick="selectTool('eraser')" class="btn btn-primary w-full">
                                    🧽 Silgi
                                </button>
                                <button onclick="clearCanvas()" class="btn btn-danger w-full">
                                    🗑️ Temizle
                                </button>
                                <button onclick="downloadDrawing()" class="btn btn-success w-full">
                                    💾 İndir
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Drawing Canvas -->
                    <div class="lg:col-span-3">
                        <div class="glass-card p-6">
                            <h3 class="text-lg font-semibold mb-4 text-white">🎨 Çizim Alanı</h3>
                            <div class="text-center">
                                <canvas id="drawingCanvas" class="drawing-canvas" width="800" height="600"></canvas>
                            </div>
                            <div class="mt-4 text-white text-sm opacity-80 text-center">
                                <p>🖱️ Fare ile çizin | 📱 Dokunmatik ekranda parmağınızla çizin</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Global variables
        let currentScreen = 'home';
        let calculatorExpression = '';
        let timerInterval = null;
        let timerSeconds = 0;
        let timerRunning = false;
        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();
        let notes = JSON.parse(localStorage.getItem('notes')) || [];
        let supportMessages = JSON.parse(localStorage.getItem('supportMessages')) || [];
        let chatLogs = JSON.parse(localStorage.getItem('chatLogs')) || [];
        let trainingData = JSON.parse(localStorage.getItem('trainingData')) || [];
        let systemUpdates = JSON.parse(localStorage.getItem('systemUpdates')) || [];
        let currentDatabaseTab = 'messages';
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let activeUsers = JSON.parse(localStorage.getItem('activeUsers')) || [];
        let userDatabase = JSON.parse(localStorage.getItem('userDatabase')) || [];
        let registeredUsers = JSON.parse(localStorage.getItem('registeredUsers')) || [];
        let waitingQueue = JSON.parse(localStorage.getItem('waitingQueue')) || [];
        let registrationTimer = JSON.parse(localStorage.getItem('registrationTimer')) || null;
        const MAX_REGISTERED_USERS = 3;
        const REGISTRATION_COOLDOWN = 60 * 60 * 1000; // 1 hour in milliseconds

        // Game variables
        let snakeGame = {
            board: [],
            snake: [{x: 10, y: 10}],
            food: {x: 5, y: 5},
            direction: {x: 0, y: 0},
            score: 0,
            highScore: localStorage.getItem('snakeHighScore') || 0,
            running: false,
            interval: null
        };

        let game2048 = {
            board: [],
            score: 0,
            highScore: localStorage.getItem('game2048HighScore') || 0
        };

        let memoryGame = {
            cards: [],
            flippedCards: [],
            moves: 0,
            matched: 0
        };

        let tictactoeGame = {
            board: ['', '', '', '', '', '', '', '', ''],
            currentPlayer: 'X',
            gameOver: false
        };

        // Productivity variables
        let pomodoroTimer = {
            timeLeft: 25 * 60, // 25 minutes in seconds
            isRunning: false,
            isBreak: false,
            sessions: parseInt(localStorage.getItem('pomodoroSessions')) || 0,
            totalMinutes: parseInt(localStorage.getItem('pomodoroTotal')) || 0,
            streak: parseInt(localStorage.getItem('pomodoroStreak')) || 0,
            interval: null
        };

        let todos = JSON.parse(localStorage.getItem('todos')) || [];
        let habits = JSON.parse(localStorage.getItem('habits')) || [];
        let goals = JSON.parse(localStorage.getItem('goals')) || [];

        // Drawing variables
        let drawingCanvas = null;
        let drawingCtx = null;
        let isDrawing = false;
        let currentTool = 'brush';
        let currentColor = '#000000';
        let brushSize = 5;

        // Initialize app
        function init() {
            // Check if user is logged in
            if (!currentUser) {
                showLoginModal();
                return;
            }
            
            updateTime();
            setInterval(updateTime, 1000);
            updateWorldClocks();
            setInterval(updateWorldClocks, 1000);
            generateCalendar();
            loadNotes();
            updateUserInfo();
            checkRegistrationTimer();
            
            // Set today's date for timer inputs
            document.getElementById('timerHours').value = 0;
            document.getElementById('timerMinutes').value = 5;
            document.getElementById('timerSeconds').value = 0;
            
            // Update registration timer every second
            setInterval(updateRegistrationTimer, 1000);
            
            // Update active users display in login modal every 30 seconds
            setInterval(() => {
                if (!document.getElementById('userLoginModal').classList.contains('hidden')) {
                    updateLoginDisplay();
                }
            }, 30000);
        }

        // User Management Functions
        function showLoginModal() {
            document.getElementById('userLoginModal').classList.remove('hidden');
            document.getElementById('usernameInput').focus();
            updateLoginDisplay();
        }

        function handleLoginKeyPress(event) {
            if (event.key === 'Enter') {
                loginUser();
            }
        }

        function loginUser() {
            const username = document.getElementById('usernameInput').value.trim();
            const password = document.getElementById('passwordInput').value.trim();
            
            // Validate username
            if (!username) {
                showLoginError('Lütfen kullanıcı adınızı girin!');
                return;
            }
            
            if (username.length < 3 || username.length > 20) {
                showLoginError('Kullanıcı adı 3-20 karakter arası olmalıdır!');
                return;
            }
            
            if (!/^[a-zA-Z0-9_çğıöşüÇĞIÖŞÜ]+$/.test(username)) {
                showLoginError('Kullanıcı adında sadece harf, rakam ve _ kullanabilirsiniz!');
                return;
            }
            
            // Validate password
            if (!password) {
                showLoginError('Lütfen şifrenizi girin!');
                return;
            }
            
            if (password.length < 6) {
                showLoginError('Şifre en az 6 karakter olmalıdır!');
                return;
            }
            
            // Check registration timer
            checkRegistrationTimer();
            
            // Get stored user credentials
            let userCredentials = JSON.parse(localStorage.getItem('userCredentials')) || {};
            
            // Check if user exists and password matches
            if (userCredentials[username.toLowerCase()]) {
                if (userCredentials[username.toLowerCase()].password !== password) {
                    showLoginError('Hatalı şifre! Lütfen tekrar deneyin.');
                    return;
                }
                
                // Existing user - check if already registered
                const isRegistered = registeredUsers.find(user => user.username.toLowerCase() === username.toLowerCase());
                if (isRegistered) {
                    // User can login directly
                    loginExistingUser(username, password, userCredentials);
                    return;
                }
            } else {
                // New user - check if username is already taken in database
                if (checkUsernameExists(username)) {
                    showLoginError('Bu kullanıcı adı zaten alınmış! Lütfen farklı bir kullanıcı adı seçin.');
                    document.getElementById('usernameInput').focus();
                    document.getElementById('usernameInput').select();
                    return;
                }
            }
            
            // New user or existing user not in current registration cycle
            if (registeredUsers.length >= MAX_REGISTERED_USERS) {
                // Add to waiting queue
                const queuePosition = waitingQueue.findIndex(user => user.username.toLowerCase() === username.toLowerCase());
                if (queuePosition === -1) {
                    waitingQueue.push({
                        username: username,
                        password: password,
                        timestamp: Date.now()
                    });
                    localStorage.setItem('waitingQueue', JSON.stringify(waitingQueue));
                }
                showWaitingScreen();
                return;
            }
            
            // Register new user
            registerNewUser(username, password, userCredentials);
        }

        function showLoginError(message) {
            const errorDiv = document.getElementById('loginError');
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
            
            setTimeout(() => {
                errorDiv.classList.add('hidden');
            }, 5000);
        }

        function generateSimulatedIP() {
            return `192.168.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`;
        }

        function registerNewUser(username, password, userCredentials) {
            // Save credentials if new user
            if (!userCredentials[username.toLowerCase()]) {
                userCredentials[username.toLowerCase()] = {
                    username: username,
                    password: password,
                    registrationDate: new Date().toLocaleString('tr-TR'),
                    lastLogin: null
                };
                localStorage.setItem('userCredentials', JSON.stringify(userCredentials));
            }
            
            // Update last login
            userCredentials[username.toLowerCase()].lastLogin = new Date().toLocaleString('tr-TR');
            localStorage.setItem('userCredentials', JSON.stringify(userCredentials));
            
            // Add to registered users
            const registeredUser = {
                username: username,
                password: password,
                registrationTime: Date.now(),
                ip: generateSimulatedIP()
            };
            
            registeredUsers.push(registeredUser);
            localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
            
            // Start timer if this is the first registration
            if (registeredUsers.length === 1) {
                registrationTimer = {
                    startTime: Date.now(),
                    endTime: Date.now() + REGISTRATION_COOLDOWN
                };
                localStorage.setItem('registrationTimer', JSON.stringify(registrationTimer));
            }
            
            // Login the user
            loginExistingUser(username, password, userCredentials);
        }

        function loginExistingUser(username, password, userCredentials) {
            // Get user IP (simulated)
            const userIP = generateSimulatedIP();
            
            // Create user session
            const user = {
                id: Date.now(),
                username: username,
                password: password,
                ip: userIP,
                loginTime: new Date().toISOString(),
                lastActivity: new Date().toISOString()
            };
            
            // Add to active users
            activeUsers.push(user);
            localStorage.setItem('activeUsers', JSON.stringify(activeUsers));
            
            // Add to user database
            const userRecord = {
                id: user.id,
                username: username,
                password: password,
                ip: userIP,
                loginTime: new Date().toLocaleString('tr-TR'),
                date: new Date().toLocaleDateString('tr-TR'),
                logoutTime: null,
                registrationDate: userCredentials[username.toLowerCase()].registrationDate
            };
            
            userDatabase.unshift(userRecord);
            localStorage.setItem('userDatabase', JSON.stringify(userDatabase));
            
            // Set current user
            currentUser = user;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            // Clear form fields
            document.getElementById('usernameInput').value = '';
            document.getElementById('passwordInput').value = '';
            
            // Hide login modal and show app
            document.getElementById('userLoginModal').classList.add('hidden');
            updateUserInfo();
            
            // Initialize app components
            updateTime();
            setInterval(updateTime, 1000);
            updateWorldClocks();
            setInterval(updateWorldClocks, 1000);
            generateCalendar();
            loadNotes();
            
            // Set timer inputs
            document.getElementById('timerHours').value = 0;
            document.getElementById('timerMinutes').value = 5;
            document.getElementById('timerSeconds').value = 0;
        }

        function checkRegistrationTimer() {
            if (!registrationTimer) return;
            
            const now = Date.now();
            if (now >= registrationTimer.endTime) {
                // Timer expired - reset registration
                registeredUsers = [];
                registrationTimer = null;
                localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
                localStorage.removeItem('registrationTimer');
                
                // Process waiting queue
                processWaitingQueue();
            }
        }

        function processWaitingQueue() {
            if (waitingQueue.length === 0) return;
            
            // Take first 3 users from queue
            const newRegistrations = waitingQueue.splice(0, MAX_REGISTERED_USERS);
            
            newRegistrations.forEach(queuedUser => {
                const registeredUser = {
                    username: queuedUser.username,
                    password: queuedUser.password,
                    registrationTime: Date.now(),
                    ip: generateSimulatedIP()
                };
                registeredUsers.push(registeredUser);
            });
            
            // Start new timer
            if (registeredUsers.length > 0) {
                registrationTimer = {
                    startTime: Date.now(),
                    endTime: Date.now() + REGISTRATION_COOLDOWN
                };
                localStorage.setItem('registrationTimer', JSON.stringify(registrationTimer));
            }
            
            localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
            localStorage.setItem('waitingQueue', JSON.stringify(waitingQueue));
        }

        function updateRegistrationTimer() {
            if (!registrationTimer) return;
            
            const now = Date.now();
            const remaining = registrationTimer.endTime - now;
            
            if (remaining <= 0) {
                checkRegistrationTimer();
                return;
            }
            
            // Update waiting screen if visible
            const waitingScreen = document.getElementById('waitingScreen');
            if (waitingScreen && !waitingScreen.classList.contains('hidden')) {
                updateWaitingScreen();
            }
        }

        function showWaitingScreen() {
            // Hide login form and show waiting screen
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('waitingScreen').classList.remove('hidden');
            updateWaitingScreen();
        }

        function updateWaitingScreen() {
            if (!registrationTimer) return;
            
            const now = Date.now();
            const remaining = registrationTimer.endTime - now;
            
            if (remaining <= 0) {
                // Timer expired, refresh the page or update display
                location.reload();
                return;
            }
            
            const hours = Math.floor(remaining / (1000 * 60 * 60));
            const minutes = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((remaining % (1000 * 60)) / 1000);
            
            const timeString = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('remainingTime').textContent = timeString;
            
            // Update queue position
            const queuePosition = waitingQueue.findIndex(user => 
                user.username.toLowerCase() === document.getElementById('usernameInput').value.toLowerCase()
            );
            
            if (queuePosition !== -1) {
                document.getElementById('queuePosition').textContent = `Sıradaki pozisyonunuz: ${queuePosition + 1}`;
            }
        }

        function updateUserInfo() {
            if (currentUser) {
                document.getElementById('currentUsername').textContent = currentUser.username;
                document.getElementById('userInfo').classList.remove('hidden');
                document.getElementById('logoutBtn').classList.remove('hidden');
                
                const loginTime = new Date(currentUser.loginTime);
                const now = new Date();
                const sessionMinutes = Math.floor((now - loginTime) / (1000 * 60));
                
                document.getElementById('sessionTime').textContent = `Oturum: ${sessionMinutes} dakika`;
            }
        }

        function logoutUser() {
            if (currentUser) {
                // Update user database with logout info
                const userRecord = userDatabase.find(user => user.id === currentUser.id);
                if (userRecord) {
                    const loginTime = new Date(currentUser.loginTime);
                    const sessionDuration = Math.floor((Date.now() - loginTime.getTime()) / (1000 * 60));
                    userRecord.logoutTime = new Date().toLocaleString('tr-TR');
                    localStorage.setItem('userDatabase', JSON.stringify(userDatabase));
                }
                
                // Remove from active users
                activeUsers = activeUsers.filter(user => user.id !== currentUser.id);
                localStorage.setItem('activeUsers', JSON.stringify(activeUsers));
                
                // Clear current user
                currentUser = null;
                localStorage.removeItem('currentUser');
                
                // Hide user info
                document.getElementById('userInfo').classList.add('hidden');
                document.getElementById('logoutBtn').classList.add('hidden');
                
                // Show login modal
                showLoginModal();
            }
        }

        function updateLoginDisplay() {
            checkRegistrationTimer();
            
            const registeredUsersList = document.getElementById('registeredUsersList');
            const waitingQueueList = document.getElementById('waitingQueueList');
            
            // Update registered users display
            if (registeredUsers.length === 0) {
                registeredUsersList.textContent = 'Şu anda kayıtlı kullanıcı yok';
            } else {
                registeredUsersList.innerHTML = registeredUsers.map(user => {
                    const registrationTime = Math.floor((Date.now() - user.registrationTime) / (1000 * 60));
                    return `• ${user.username} (${registrationTime} dk önce kayıt oldu)`;
                }).join('<br>');
            }
            
            // Update waiting queue display
            if (waitingQueue.length === 0) {
                waitingQueueList.textContent = 'Bekleme kuyruğu boş';
            } else {
                waitingQueueList.innerHTML = waitingQueue.map((user, index) => {
                    return `${index + 1}. ${user.username}`;
                }).join('<br>');
            }
            
            // Update timer display
            if (registrationTimer) {
                const remaining = registrationTimer.endTime - Date.now();
                if (remaining > 0) {
                    const hours = Math.floor(remaining / (1000 * 60 * 60));
                    const minutes = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((remaining % (1000 * 60)) / 1000);
                    
                    document.getElementById('registrationTimer').textContent = 
                        `Yeni kayıtlara kalan süre: ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                } else {
                    document.getElementById('registrationTimer').textContent = 'Yeni kayıtlar açılıyor...';
                }
            } else {
                document.getElementById('registrationTimer').textContent = 'Kayıt açık';
            }
        }

        // Navigation functions
        function showApp(appName) {
            document.getElementById('homeScreen').classList.add('hidden');
            document.getElementById(appName + 'Screen').classList.remove('hidden');
            currentScreen = appName;
        }

        function goHome() {
            document.querySelectorAll('[id$="Screen"]').forEach(screen => {
                screen.classList.add('hidden');
            });
            document.getElementById('homeScreen').classList.remove('hidden');
            currentScreen = 'home';
        }

        // Time functions
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('tr-TR');
            const dateString = now.toLocaleDateString('tr-TR', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            document.getElementById('currentTime').textContent = timeString;
            document.getElementById('currentDate').textContent = dateString;
            
            if (document.getElementById('mainClock')) {
                document.getElementById('mainClock').textContent = timeString;
                document.getElementById('mainDate').textContent = dateString;
            }
        }

        function updateWorldClocks() {
            const now = new Date();
            
            // Istanbul
            const istanbul = new Date(now.toLocaleString("en-US", {timeZone: "Europe/Istanbul"}));
            document.getElementById('istanbul-time').textContent = istanbul.toLocaleTimeString('tr-TR', {hour: '2-digit', minute: '2-digit'});
            
            // London
            const london = new Date(now.toLocaleString("en-US", {timeZone: "Europe/London"}));
            document.getElementById('london-time').textContent = london.toLocaleTimeString('tr-TR', {hour: '2-digit', minute: '2-digit'});
            
            // New York
            const newYork = new Date(now.toLocaleString("en-US", {timeZone: "America/New_York"}));
            document.getElementById('newyork-time').textContent = newYork.toLocaleTimeString('tr-TR', {hour: '2-digit', minute: '2-digit'});
            
            // Tokyo
            const tokyo = new Date(now.toLocaleString("en-US", {timeZone: "Asia/Tokyo"}));
            document.getElementById('tokyo-time').textContent = tokyo.toLocaleTimeString('tr-TR', {hour: '2-digit', minute: '2-digit'});
        }

        // Calculator functions
        function appendToCalculator(value) {
            const display = document.getElementById('calculatorDisplay');
            if (display.textContent === '0') {
                display.textContent = value;
            } else {
                display.textContent += value;
            }
            calculatorExpression = display.textContent;
        }

        function clearCalculator() {
            document.getElementById('calculatorDisplay').textContent = '0';
            calculatorExpression = '';
        }

        function deleteLast() {
            const display = document.getElementById('calculatorDisplay');
            if (display.textContent.length > 1) {
                display.textContent = display.textContent.slice(0, -1);
            } else {
                display.textContent = '0';
            }
            calculatorExpression = display.textContent;
        }

        function calculateResult() {
            try {
                const expression = calculatorExpression.replace(/×/g, '*');
                const result = eval(expression);
                document.getElementById('calculatorDisplay').textContent = result;
                calculatorExpression = result.toString();
            } catch (error) {
                document.getElementById('calculatorDisplay').textContent = 'Hata';
                calculatorExpression = '';
            }
        }

        // Timer functions
        function startTimer() {
            if (!timerRunning) {
                const hours = parseInt(document.getElementById('timerHours').value) || 0;
                const minutes = parseInt(document.getElementById('timerMinutes').value) || 0;
                const seconds = parseInt(document.getElementById('timerSeconds').value) || 0;
                
                timerSeconds = hours * 3600 + minutes * 60 + seconds;
                
                if (timerSeconds > 0) {
                    timerRunning = true;
                    timerInterval = setInterval(updateTimer, 1000);
                    document.getElementById('startTimer').disabled = true;
                    document.getElementById('pauseTimer').disabled = false;
                }
            }
        }

        function pauseTimer() {
            timerRunning = false;
            clearInterval(timerInterval);
            document.getElementById('startTimer').disabled = false;
            document.getElementById('pauseTimer').disabled = true;
        }

        function resetTimer() {
            timerRunning = false;
            clearInterval(timerInterval);
            timerSeconds = 0;
            document.getElementById('timerDisplay').textContent = '00:00:00';
            document.getElementById('startTimer').disabled = false;
            document.getElementById('pauseTimer').disabled = true;
        }

        function updateTimer() {
            if (timerSeconds > 0) {
                timerSeconds--;
                const hours = Math.floor(timerSeconds / 3600);
                const minutes = Math.floor((timerSeconds % 3600) / 60);
                const seconds = timerSeconds % 60;
                
                document.getElementById('timerDisplay').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            } else {
                resetTimer();
                alert('Süre doldu!');
            }
        }

        // Notes functions
        function addNote() {
            const title = document.getElementById('noteTitle').value.trim();
            const content = document.getElementById('noteContent').value.trim();
            
            if (title && content) {
                const note = {
                    id: Date.now(),
                    title: title,
                    content: content,
                    date: new Date().toLocaleDateString('tr-TR')
                };
                
                notes.unshift(note);
                localStorage.setItem('notes', JSON.stringify(notes));
                
                document.getElementById('noteTitle').value = '';
                document.getElementById('noteContent').value = '';
                
                loadNotes();
            }
        }

        function loadNotes() {
            const notesList = document.getElementById('notesList');
            
            if (notes.length === 0) {
                notesList.innerHTML = '<div class="text-center opacity-60 py-8 text-white">Henüz not eklenmedi</div>';
                return;
            }
            
            notesList.innerHTML = notes.map(note => `
                <div class="note-item">
                    <div class="note-title">${note.title}</div>
                    <div class="note-content">${note.content}</div>
                    <div class="note-date">${note.date}</div>
                    <button onclick="deleteNote(${note.id})" class="btn btn-danger btn-sm mt-2">Sil</button>
                </div>
            `).join('');
        }

        function deleteNote(id) {
            notes = notes.filter(note => note.id !== id);
            localStorage.setItem('notes', JSON.stringify(notes));
            loadNotes();
        }

        function clearAllNotes() {
            if (confirm('Tüm notları silmek istediğinizden emin misiniz?')) {
                notes = [];
                localStorage.setItem('notes', JSON.stringify(notes));
                loadNotes();
            }
        }

        // Calendar functions
        function generateCalendar() {
            const calendarDays = document.getElementById('calendarDays');
            const calendarTitle = document.getElementById('calendarTitle');
            
            const monthNames = [
                'Ocak', 'Şubat', 'Mart', 'Nisan', 'Mayıs', 'Haziran',
                'Temmuz', 'Ağustos', 'Eylül', 'Ekim', 'Kasım', 'Aralık'
            ];
            
            calendarTitle.textContent = `${monthNames[currentMonth]} ${currentYear}`;
            
            const firstDay = new Date(currentYear, currentMonth, 1);
            const lastDay = new Date(currentYear, currentMonth + 1, 0);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - (firstDay.getDay() === 0 ? 6 : firstDay.getDay() - 1));
            
            const today = new Date();
            calendarDays.innerHTML = '';
            
            for (let i = 0; i < 42; i++) {
                const date = new Date(startDate);
                date.setDate(startDate.getDate() + i);
                
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day text-white';
                dayElement.textContent = date.getDate();
                
                if (date.getMonth() !== currentMonth) {
                    dayElement.classList.add('other-month');
                }
                
                if (date.toDateString() === today.toDateString()) {
                    dayElement.classList.add('today');
                }
                
                calendarDays.appendChild(dayElement);
            }
        }

        function previousMonth() {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            generateCalendar();
        }

        function nextMonth() {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            generateCalendar();
        }

        // Password generator functions
        function updateLength() {
            const length = document.getElementById('passwordLength').value;
            document.getElementById('lengthValue').textContent = length;
        }

        function generatePassword() {
            const length = parseInt(document.getElementById('passwordLength').value);
            const includeUppercase = document.getElementById('includeUppercase').checked;
            const includeLowercase = document.getElementById('includeLowercase').checked;
            const includeNumbers = document.getElementById('includeNumbers').checked;
            const includeSymbols = document.getElementById('includeSymbols').checked;
            
            let charset = '';
            if (includeUppercase) charset += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            if (includeLowercase) charset += 'abcdefghijklmnopqrstuvwxyz';
            if (includeNumbers) charset += '0123456789';
            if (includeSymbols) charset += '!@#$%^&*()_+-=[]{}|;:,.<>?';
            
            if (charset === '') {
                alert('En az bir karakter türü seçmelisiniz!');
                return;
            }
            
            let password = '';
            for (let i = 0; i < length; i++) {
                password += charset.charAt(Math.floor(Math.random() * charset.length));
            }
            
            document.getElementById('generatedPassword').value = password;
            checkPasswordStrength(password);
        }

        function checkPasswordStrength(password) {
            const strengthBar = document.getElementById('passwordStrength');
            const strengthText = document.getElementById('strengthText');
            
            let score = 0;
            if (password.length >= 8) score++;
            if (password.length >= 12) score++;
            if (/[a-z]/.test(password)) score++;
            if (/[A-Z]/.test(password)) score++;
            if (/[0-9]/.test(password)) score++;
            if (/[^A-Za-z0-9]/.test(password)) score++;
            
            if (score < 3) {
                strengthBar.className = 'password-strength strength-weak';
                strengthText.textContent = 'Zayıf';
            } else if (score < 5) {
                strengthBar.className = 'password-strength strength-medium';
                strengthText.textContent = 'Orta';
            } else {
                strengthBar.className = 'password-strength strength-strong';
                strengthText.textContent = 'Güçlü';
            }
        }

        function copyPassword() {
            const passwordField = document.getElementById('generatedPassword');
            passwordField.select();
            document.execCommand('copy');
            alert('Şifre kopyalandı!');
        }

        // Weather functions
        function getWeather() {
            const city = document.getElementById('cityInput').value || 'İstanbul';
            
            // Simulated weather data
            const weatherData = {
                location: city + ', TR',
                temperature: Math.floor(Math.random() * 30) + 5,
                description: ['Açık', 'Bulutlu', 'Parçalı Bulutlu', 'Yağmurlu'][Math.floor(Math.random() * 4)],
                icon: ['☀️', '☁️', '⛅', '🌧️'][Math.floor(Math.random() * 4)],
                feelsLike: Math.floor(Math.random() * 30) + 5,
                humidity: Math.floor(Math.random() * 50) + 30,
                windSpeed: Math.floor(Math.random() * 20) + 5,
                pressure: Math.floor(Math.random() * 50) + 1000
            };
            
            document.getElementById('weatherLocation').textContent = weatherData.location;
            document.getElementById('weatherTemp').textContent = weatherData.temperature + '°C';
            document.getElementById('weatherDescription').textContent = weatherData.description;
            document.getElementById('weatherIcon').textContent = weatherData.icon;
            document.getElementById('feelsLike').textContent = weatherData.feelsLike + '°C';
            document.getElementById('humidity').textContent = weatherData.humidity + '%';
            document.getElementById('windSpeed').textContent = weatherData.windSpeed + ' km/h';
            document.getElementById('pressure').textContent = weatherData.pressure + ' hPa';
        }

        // Menu functions
        function toggleMenu() {
            const menu = document.getElementById('sideMenu');
            menu.classList.toggle('-translate-x-full');
        }

        // AI Chat functions
        function showAIModal() {
            document.getElementById('aiModal').classList.remove('hidden');
            document.getElementById('aiInput').focus();
        }

        function closeAIModal() {
            document.getElementById('aiModal').classList.add('hidden');
            document.getElementById('aiInput').value = '';
        }

        function handleAIKeyPress(event) {
            if (event.key === 'Enter') {
                sendAIMessage();
            }
        }

        function sendAIMessage() {
            const input = document.getElementById('aiInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message to chat
            addMessageToChat('user', message);
            input.value = '';
            
            // Show typing indicator
            showTypingIndicator();
            
            // Simulate AI response after a delay
            setTimeout(() => {
                hideTypingIndicator();
                const aiResponse = generateAIResponse(message);
                addMessageToChat('ai', aiResponse);
            }, 1500);
        }

        function addMessageToChat(sender, message) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex items-start space-x-3';
            
            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="w-8 h-8 rounded-full bg-gradient-to-r from-green-500 to-blue-500 flex items-center justify-center text-white font-bold">U</div>
                    <div class="glass-card p-3 flex-1">
                        <p class="text-white">${message}</p>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="w-8 h-8 rounded-full bg-gradient-to-r from-purple-600 to-blue-600 flex items-center justify-center text-white font-bold">AI</div>
                    <div class="glass-card p-3 flex-1">
                        <p class="text-white">${message}</p>
                    </div>
                `;
            }
            
            // Save chat log to database
            const chatLog = {
                id: Date.now(),
                sender: sender,
                message: message,
                timestamp: new Date().toLocaleString('tr-TR'),
                date: new Date().toLocaleDateString('tr-TR')
            };
            
            chatLogs.push(chatLog);
            localStorage.setItem('chatLogs', JSON.stringify(chatLogs));
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function showTypingIndicator() {
            const chatMessages = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typingIndicator';
            typingDiv.className = 'flex items-start space-x-3';
            typingDiv.innerHTML = `
                <div class="w-8 h-8 rounded-full bg-gradient-to-r from-purple-600 to-blue-600 flex items-center justify-center text-white font-bold">AI</div>
                <div class="glass-card p-3 flex-1">
                    <p class="text-white">Yazıyor...</p>
                </div>
            `;
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        // Refresh App Function
        function refreshApp() {
            // Show loading animation
            const refreshBtn = event.target.closest('button');
            const originalContent = refreshBtn.innerHTML;
            
            refreshBtn.innerHTML = `
                <svg class="w-6 h-6 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                </svg>
            `;
            
            // Add system update to database
            const updateMessage = {
                id: Date.now(),
                type: 'system',
                message: `Uygulama yenilendi - Versiyon ${new Date().getTime().toString().slice(-4)} güncellendi. Yeni özellikler ve performans iyileştirmeleri eklendi.`,
                timestamp: new Date().toLocaleString('tr-TR'),
                date: new Date().toLocaleDateString('tr-TR')
            };
            
            systemUpdates.unshift(updateMessage);
            localStorage.setItem('systemUpdates', JSON.stringify(systemUpdates));
            
            // Simulate refresh process
            setTimeout(() => {
                refreshBtn.innerHTML = originalContent;
                
                // Show success message
                const successDiv = document.createElement('div');
                successDiv.className = 'fixed top-20 right-6 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50';
                successDiv.innerHTML = '✅ Uygulama başarıyla yenilendi!';
                document.body.appendChild(successDiv);
                
                // Remove success message after 3 seconds
                setTimeout(() => {
                    successDiv.remove();
                }, 3000);
                
                // Update time and other dynamic content
                updateTime();
                updateWorldClocks();
                
            }, 2000);
        }

        function generateAIResponse(userMessage) {
            const lowerMessage = userMessage.toLowerCase();
            
            // Advanced machine learning: Find the best matching trained response
            let bestMatch = null;
            let bestScore = 0;
            
            for (let training of trainingData) {
                const score = calculateSimilarity(lowerMessage, training.userMessage.toLowerCase());
                if (score > bestScore && score > 0.3) { // 30% similarity threshold
                    bestScore = score;
                    bestMatch = training;
                }
            }
            
            // If we found a good match, return the trained response
            if (bestMatch) {
                return bestMatch.aiResponse;
            }
            
            const responses = [
                "Bu çok ilginç bir soru! Size yardımcı olmaya çalışayım.",
                "Anlıyorum. Bu konuda size şu bilgileri verebilirim:",
                "Harika bir soru! Bu konuda düşünmeme izin verin.",
                "Size bu konuda yardımcı olabilirim. İşte önerilerim:",
                "Bu gerçekten önemli bir konu. Size şu şekilde açıklayabilirim:",
                "Mükemmel bir soru! Bu konuda size detaylı bilgi verebilirim.",
                "Bu konuda size yardımcı olmaktan mutluluk duyarım.",
                "Çok güzel bir soru sordunuz. İşte cevabım:"
            ];
            
            // Simple keyword-based responses
            if (lowerMessage.includes('merhaba') || lowerMessage.includes('selam')) {
                return "Merhaba! Ben İŞLEV asistanınızım. Size nasıl yardımcı olabilirim? Herhangi bir sorunuz varsa çekinmeden sorabilirsiniz.";
            }
            
            if (lowerMessage.includes('nasılsın') || lowerMessage.includes('nasıl gidiyor')) {
                return "Teşekkür ederim! Ben İŞLEV AI asistanıyım ve size yardımcı olmak için buradayım. Siz nasılsınız?";
            }
            
            if (lowerMessage.includes('yardım') || lowerMessage.includes('help')) {
                return "Tabii ki size yardımcı olabilirim! Sorularınızı sorabilir, bilgi isteyebilir veya herhangi bir konuda destek alabilirsiniz.";
            }
            
            if (lowerMessage.includes('teşekkür') || lowerMessage.includes('sağol')) {
                return "Rica ederim! Size yardımcı olabildiysem ne mutlu bana. Başka sorularınız varsa çekinmeden sorabilirsiniz.";
            }
            
            if (lowerMessage.includes('uygulama') || lowerMessage.includes('app')) {
                return "Bu uygulama merkezi gerçekten harika! Hesap makinesi, takvim, not defteri gibi birçok kullanışlı araç var. Hangi uygulamayı kullanmak istiyorsunuz?";
            }
            
            // Default response
            const randomResponse = responses[Math.floor(Math.random() * responses.length)];
            return randomResponse + " Daha spesifik sorularınız varsa lütfen sorun!";
        }

        // Advanced similarity calculation function
        function calculateSimilarity(str1, str2) {
            // Remove Turkish characters and normalize
            const normalize = (str) => {
                return str.toLowerCase()
                    .replace(/ğ/g, 'g').replace(/ü/g, 'u').replace(/ş/g, 's')
                    .replace(/ı/g, 'i').replace(/ö/g, 'o').replace(/ç/g, 'c')
                    .replace(/[^\w\s]/g, ' ').replace(/\s+/g, ' ').trim();
            };
            
            const normalizedStr1 = normalize(str1);
            const normalizedStr2 = normalize(str2);
            
            // Word-based similarity
            const words1 = normalizedStr1.split(' ');
            const words2 = normalizedStr2.split(' ');
            
            let commonWords = 0;
            let totalWords = Math.max(words1.length, words2.length);
            
            for (let word1 of words1) {
                if (word1.length > 2) { // Ignore very short words
                    for (let word2 of words2) {
                        if (word2.length > 2) {
                            // Exact match
                            if (word1 === word2) {
                                commonWords += 1;
                                break;
                            }
                            // Partial match (for similar words)
                            else if (word1.includes(word2) || word2.includes(word1)) {
                                commonWords += 0.7;
                                break;
                            }
                            // Levenshtein distance for typos
                            else if (levenshteinDistance(word1, word2) <= 2 && Math.min(word1.length, word2.length) > 3) {
                                commonWords += 0.5;
                                break;
                            }
                        }
                    }
                }
            }
            
            // Character-based similarity for short phrases
            const charSimilarity = 1 - (levenshteinDistance(normalizedStr1, normalizedStr2) / Math.max(normalizedStr1.length, normalizedStr2.length));
            
            // Combined score
            const wordScore = commonWords / totalWords;
            const finalScore = (wordScore * 0.7) + (charSimilarity * 0.3);
            
            return finalScore;
        }

        // Levenshtein distance calculation
        function levenshteinDistance(str1, str2) {
            const matrix = [];
            
            for (let i = 0; i <= str2.length; i++) {
                matrix[i] = [i];
            }
            
            for (let j = 0; j <= str1.length; j++) {
                matrix[0][j] = j;
            }
            
            for (let i = 1; i <= str2.length; i++) {
                for (let j = 1; j <= str1.length; j++) {
                    if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
                        matrix[i][j] = matrix[i - 1][j - 1];
                    } else {
                        matrix[i][j] = Math.min(
                            matrix[i - 1][j - 1] + 1,
                            matrix[i][j - 1] + 1,
                            matrix[i - 1][j] + 1
                        );
                    }
                }
            }
            
            return matrix[str2.length][str1.length];
        }

        // Support functions
        function showSupportModal() {
            document.getElementById('supportModal').classList.remove('hidden');
        }

        function closeSupportModal() {
            document.getElementById('supportModal').classList.add('hidden');
            document.getElementById('supportMessage').value = '';
            document.getElementById('supportType').value = 'suggestion';
        }

        function submitSupport() {
            const type = document.getElementById('supportType').value;
            const message = document.getElementById('supportMessage').value.trim();
            
            if (!message) {
                alert('Lütfen mesajınızı yazın!');
                return;
            }
            
            // Save support message to database
            const supportMessage = {
                id: Date.now(),
                type: type,
                message: message,
                timestamp: new Date().toLocaleString('tr-TR'),
                date: new Date().toLocaleDateString('tr-TR')
            };
            
            supportMessages.unshift(supportMessage);
            localStorage.setItem('supportMessages', JSON.stringify(supportMessages));
            
            const typeNames = {
                'suggestion': 'Öneri',
                'complaint': 'Şikayet', 
                'bug': 'Hata Bildirimi',
                'other': 'Diğer'
            };
            
            alert(`${typeNames[type]} mesajınız alındı! Geri dönüş için teşekkür ederiz.`);
            closeSupportModal();
        }

        // Database access functions
        function checkDatabaseAccess() {
            document.getElementById('databaseAccessModal').classList.remove('hidden');
            document.getElementById('databasePassword').focus();
            document.getElementById('accessError').classList.add('hidden');
        }

        function closeDatabaseAccessModal() {
            document.getElementById('databaseAccessModal').classList.add('hidden');
            document.getElementById('databasePassword').value = '';
            document.getElementById('accessError').classList.add('hidden');
        }

        function handleDatabaseKeyPress(event) {
            if (event.key === 'Enter') {
                verifyDatabaseAccess();
            }
        }

        function verifyDatabaseAccess() {
            const password = document.getElementById('databasePassword').value;
            const correctPassword = '...TABAN.BURAK...';
            
            if (password === correctPassword) {
                closeDatabaseAccessModal();
                showApp('database');
                loadDatabaseData();
            } else {
                document.getElementById('accessError').classList.remove('hidden');
                document.getElementById('databasePassword').value = '';
                document.getElementById('databasePassword').focus();
            }
        }

        function loadDatabaseData() {
            loadSupportMessages();
            loadChatLogs();
            updateStatistics();
        }

        function loadSupportMessages() {
            const supportMessagesList = document.getElementById('supportMessagesList');
            
            if (supportMessages.length === 0) {
                supportMessagesList.innerHTML = '<div class="text-center opacity-60 py-8 text-white">Henüz destek mesajı yok</div>';
                return;
            }
            
            const typeIcons = {
                'suggestion': '💡',
                'complaint': '😞',
                'bug': '🐛',
                'other': '❓',
                'system': '🔄'
            };
            
            const typeNames = {
                'suggestion': 'Öneri',
                'complaint': 'Şikayet',
                'bug': 'Hata Bildirimi',
                'other': 'Diğer',
                'system': 'Sistem Güncellemesi'
            };
            
            supportMessagesList.innerHTML = supportMessages.map(msg => `
                <div class="glass-card p-4">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center space-x-2">
                            <span class="text-lg">${typeIcons[msg.type]}</span>
                            <span class="font-semibold text-white">${typeNames[msg.type]}</span>
                        </div>
                        <span class="text-sm opacity-60 text-white">${msg.timestamp}</span>
                    </div>
                    <p class="text-white opacity-90 text-sm">${msg.message}</p>
                </div>
            `).join('');
        }

        function loadChatLogs() {
            const chatLogsList = document.getElementById('chatLogsList');
            
            if (chatLogs.length === 0) {
                chatLogsList.innerHTML = '<div class="text-center opacity-60 py-8 text-white">Henüz sohbet kaydı yok</div>';
                return;
            }
            
            // Group chat logs by conversation sessions (by date and time proximity)
            const conversations = [];
            let currentConversation = [];
            
            chatLogs.forEach((log, index) => {
                if (log.sender === 'user' && currentConversation.length > 0 && 
                    currentConversation[currentConversation.length - 1].sender === 'ai') {
                    conversations.push([...currentConversation]);
                    currentConversation = [log];
                } else {
                    currentConversation.push(log);
                }
                
                if (index === chatLogs.length - 1 && currentConversation.length > 0) {
                    conversations.push(currentConversation);
                }
            });
            
            chatLogsList.innerHTML = conversations.slice(-10).reverse().map((conversation, index) => `
                <div class="glass-card p-4">
                    <div class="font-semibold text-white mb-2">🗨️ Sohbet ${conversations.length - index}</div>
                    <div class="text-sm opacity-60 text-white mb-3">${conversation[0].timestamp}</div>
                    <div class="space-y-2 max-h-32 overflow-y-auto">
                        ${conversation.map(log => `
                            <div class="text-sm">
                                <span class="font-medium ${log.sender === 'user' ? 'text-green-300' : 'text-blue-300'}">
                                    ${log.sender === 'user' ? 'Kullanıcı' : 'AI'}:
                                </span>
                                <span class="text-white opacity-90">${log.message.substring(0, 100)}${log.message.length > 100 ? '...' : ''}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        function updateStatistics() {
            document.getElementById('totalSupport').textContent = supportMessages.length;
            document.getElementById('totalSuggestions').textContent = supportMessages.filter(msg => msg.type === 'suggestion').length;
            document.getElementById('totalComplaints').textContent = supportMessages.filter(msg => msg.type === 'complaint').length;
            
            // Count unique chat sessions
            const uniqueDates = [...new Set(chatLogs.map(log => log.date))];
            document.getElementById('totalChats').textContent = uniqueDates.length;
        }

        function clearSupportMessages() {
            if (confirm('Tüm destek mesajlarını silmek istediğinizden emin misiniz?')) {
                supportMessages = [];
                localStorage.setItem('supportMessages', JSON.stringify(supportMessages));
                loadSupportMessages();
                updateStatistics();
            }
        }

        function clearChatLogs() {
            if (confirm('Tüm sohbet kayıtlarını silmek istediğinizden emin misiniz?')) {
                chatLogs = [];
                localStorage.setItem('chatLogs', JSON.stringify(chatLogs));
                loadChatLogs();
                updateStatistics();
            }
        }

        // Training Modal Functions
        function showTrainingModal() {
            document.getElementById('trainingModal').classList.remove('hidden');
            document.getElementById('userMessage').focus();
        }

        function closeTrainingModal() {
            document.getElementById('trainingModal').classList.add('hidden');
            document.getElementById('userMessage').value = '';
            document.getElementById('aiResponse').value = '';
            document.getElementById('trainingSuccess').classList.add('hidden');
        }

        function submitTraining() {
            const userMessage = document.getElementById('userMessage').value.trim();
            const aiResponse = document.getElementById('aiResponse').value.trim();
            
            if (!userMessage || !aiResponse) {
                alert('Lütfen hem kullanıcı mesajını hem de AI cevabını yazın!');
                return;
            }
            
            // Save training data
            const training = {
                id: Date.now(),
                userMessage: userMessage,
                aiResponse: aiResponse,
                timestamp: new Date().toLocaleString('tr-TR'),
                date: new Date().toLocaleDateString('tr-TR')
            };
            
            trainingData.unshift(training);
            localStorage.setItem('trainingData', JSON.stringify(trainingData));
            
            // Show success message
            document.getElementById('trainingSuccess').classList.remove('hidden');
            
            // Clear form after 2 seconds
            setTimeout(() => {
                closeTrainingModal();
            }, 2000);
        }

        // Database Tab Functions
        function showDatabaseTab(tabName) {
            // Hide all tab contents
            document.getElementById('messagesTabContent').classList.add('hidden');
            document.getElementById('chatsTabContent').classList.add('hidden');
            document.getElementById('trainingTabContent').classList.add('hidden');
            document.getElementById('usersTabContent').classList.add('hidden');
            document.getElementById('credentialsTabContent').classList.add('hidden');
            
            // Remove active class from all tabs
            document.getElementById('messagesTab').classList.remove('bg-blue-600');
            document.getElementById('chatsTab').classList.remove('bg-blue-600');
            document.getElementById('trainingTab').classList.remove('bg-blue-600');
            document.getElementById('usersTab').classList.remove('bg-blue-600');
            document.getElementById('credentialsTab').classList.remove('bg-blue-600');
            
            // Show selected tab content
            document.getElementById(tabName + 'TabContent').classList.remove('hidden');
            document.getElementById(tabName + 'Tab').classList.add('bg-blue-600');
            
            currentDatabaseTab = tabName;
            
            // Load appropriate data
            if (tabName === 'messages') {
                loadSupportMessages();
                loadSystemUpdates();
            } else if (tabName === 'chats') {
                loadChatLogs();
            } else if (tabName === 'training') {
                loadTrainingData();
            } else if (tabName === 'users') {
                loadUsersData();
            } else if (tabName === 'credentials') {
                loadCredentialsData();
            }
        }

        // User Database Functions
        function loadUsersData() {
            loadActiveUsersData();
            loadUserDatabaseData();
            updateUserStatistics();
        }

        function loadActiveUsersData() {
            const activeUsersDisplay = document.getElementById('activeUsersDisplay');
            
            if (activeUsers.length === 0) {
                activeUsersDisplay.innerHTML = '<div class="text-center opacity-60 py-8 text-white">Şu anda aktif kullanıcı yok</div>';
                return;
            }
            
            activeUsersDisplay.innerHTML = activeUsers.map(user => {
                const loginTime = new Date(user.loginTime);
                const sessionAge = Math.floor((Date.now() - loginTime.getTime()) / (1000 * 60));
                
                return `
                    <div class="glass-card p-4">
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center space-x-2">
                                <span class="text-lg">🟢</span>
                                <span class="font-semibold text-white">${user.username}</span>
                            </div>
                            <span class="text-sm opacity-60 text-white">${user.ip}</span>
                        </div>
                        <div class="text-sm text-white opacity-80">
                            <div>Giriş: ${loginTime.toLocaleString('tr-TR')}</div>
                            <div>Oturum: ${sessionAge} dakika (Sınırsız)</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function loadUserDatabaseData() {
            const userDatabaseDisplay = document.getElementById('userDatabaseDisplay');
            
            if (userDatabase.length === 0) {
                userDatabaseDisplay.innerHTML = '<div class="text-center opacity-60 py-8 text-white">Henüz kullanıcı kaydı yok</div>';
                return;
            }
            
            userDatabaseDisplay.innerHTML = userDatabase.slice(0, 50).map(user => {
                const statusIcon = user.logoutTime ? '🔴' : '🟢';
                const statusText = user.logoutTime ? 'Çıkış Yaptı' : 'Aktif';
                const maskedPassword = user.password ? '*'.repeat(user.password.length) : 'N/A';
                
                return `
                    <div class="glass-card p-4">
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center space-x-2">
                                <span class="text-lg">${statusIcon}</span>
                                <span class="font-semibold text-white">${user.username}</span>
                            </div>
                            <span class="text-sm opacity-60 text-white">${user.ip}</span>
                        </div>
                        <div class="text-sm text-white opacity-80">
                            <div>Şifre: <span class="font-mono">${maskedPassword}</span></div>
                            <div>Giriş: ${user.loginTime}</div>
                            ${user.logoutTime ? `<div>Çıkış: ${user.logoutTime}</div>` : ''}
                            ${user.registrationDate ? `<div>Kayıt: ${user.registrationDate}</div>` : ''}
                            <div>Süre: ${user.sessionDuration} dakika | Durum: ${statusText}</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateUserStatistics() {
            // Total users
            const uniqueUsers = [...new Set(userDatabase.map(user => user.username.toLowerCase()))];
            document.getElementById('totalUsers').textContent = uniqueUsers.length;
            
            // Current active users
            document.getElementById('currentActiveUsers').textContent = activeUsers.length;
            
            // Today's logins
            const today = new Date().toLocaleDateString('tr-TR');
            const todayLogins = userDatabase.filter(user => user.date === today).length;
            document.getElementById('todayLogins').textContent = todayLogins;
            
            // Registered users in current cycle
            document.getElementById('averageSession').textContent = registeredUsers.length + '/3';
        }

        function refreshActiveUsers() {
            loadActiveUsersData();
            updateUserStatistics();
            
            // Show refresh animation
            const refreshBtn = event.target;
            const originalContent = refreshBtn.innerHTML;
            refreshBtn.innerHTML = '🔄 Yenileniyor...';
            
            setTimeout(() => {
                refreshBtn.innerHTML = originalContent;
            }, 1000);
        }

        function clearUserDatabase() {
            if (confirm('Tüm kullanıcı verilerini silmek istediğinizden emin misiniz? Bu işlem geri alınamaz!')) {
                userDatabase = [];
                localStorage.setItem('userDatabase', JSON.stringify(userDatabase));
                loadUserDatabaseData();
                updateUserStatistics();
            }
        }

        function loadSystemUpdates() {
            const systemUpdatesList = document.getElementById('systemUpdatesList');
            
            if (systemUpdates.length === 0) {
                systemUpdatesList.innerHTML = '<div class="text-center opacity-60 py-8 text-white">Henüz sistem güncellemesi yok</div>';
                return;
            }
            
            systemUpdatesList.innerHTML = systemUpdates.map(update => `
                <div class="glass-card p-4">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center space-x-2">
                            <span class="text-lg">🔄</span>
                            <span class="font-semibold text-white">Sistem Güncellemesi</span>
                        </div>
                        <span class="text-sm opacity-60 text-white">${update.timestamp}</span>
                    </div>
                    <p class="text-white opacity-90 text-sm">${update.message}</p>
                </div>
            `).join('');
        }

        function loadTrainingData() {
            const trainingDataList = document.getElementById('trainingDataList');
            
            if (trainingData.length === 0) {
                trainingDataList.innerHTML = '<div class="text-center opacity-60 py-8 text-white">Henüz öğrenme verisi yok</div>';
                return;
            }
            
            trainingDataList.innerHTML = trainingData.map(training => `
                <div class="glass-card p-4">
                    <div class="flex items-center justify-between mb-3">
                        <span class="font-semibold text-white">🧠 Öğrenme Verisi</span>
                        <span class="text-sm opacity-60 text-white">${training.timestamp}</span>
                    </div>
                    <div class="space-y-2">
                        <div>
                            <span class="text-sm font-medium text-green-300">Kullanıcı:</span>
                            <p class="text-white opacity-90 text-sm">${training.userMessage}</p>
                        </div>
                        <div>
                            <span class="text-sm font-medium text-blue-300">İŞLEV:</span>
                            <p class="text-white opacity-90 text-sm">${training.aiResponse}</p>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function clearSystemUpdates() {
            if (confirm('Tüm sistem güncellemelerini silmek istediğinizden emin misiniz?')) {
                systemUpdates = [];
                localStorage.setItem('systemUpdates', JSON.stringify(systemUpdates));
                loadSystemUpdates();
                updateStatistics();
            }
        }

        function clearTrainingData() {
            if (confirm('Tüm öğrenme verilerini silmek istediğinizden emin misiniz?')) {
                trainingData = [];
                localStorage.setItem('trainingData', JSON.stringify(trainingData));
                loadTrainingData();
                updateStatistics();
            }
        }

        // Bulk Training Functions
        function processBulkTraining() {
            const bulkData = document.getElementById('bulkTrainingData').value.trim();
            const resultDiv = document.getElementById('bulkTrainingResult');
            
            if (!bulkData) {
                showBulkResult('❌ Lütfen öğrenme verisi girin!', 'text-red-300');
                return;
            }
            
            try {
                const pairs = parseBulkTrainingData(bulkData);
                
                if (pairs.length === 0) {
                    showBulkResult('❌ Geçerli soru-cevap çifti bulunamadı! Format kontrol edin.', 'text-red-300');
                    return;
                }
                
                let successCount = 0;
                let duplicateCount = 0;
                
                pairs.forEach(pair => {
                    // Check for duplicates
                    const isDuplicate = trainingData.some(existing => 
                        existing.userMessage.toLowerCase().trim() === pair.question.toLowerCase().trim()
                    );
                    
                    if (!isDuplicate) {
                        const training = {
                            id: Date.now() + Math.random(),
                            userMessage: pair.question,
                            aiResponse: pair.answer,
                            timestamp: new Date().toLocaleString('tr-TR'),
                            date: new Date().toLocaleDateString('tr-TR'),
                            source: 'bulk'
                        };
                        
                        trainingData.unshift(training);
                        successCount++;
                    } else {
                        duplicateCount++;
                    }
                });
                
                localStorage.setItem('trainingData', JSON.stringify(trainingData));
                loadTrainingData();
                
                let message = `✅ ${successCount} adet yeni öğrenme verisi eklendi!`;
                if (duplicateCount > 0) {
                    message += ` (${duplicateCount} adet tekrar atlandı)`;
                }
                
                showBulkResult(message, 'text-green-300');
                
                // Clear the textarea after successful processing
                setTimeout(() => {
                    document.getElementById('bulkTrainingData').value = '';
                }, 2000);
                
            } catch (error) {
                showBulkResult('❌ Veri işlenirken hata oluştu! Format kontrol edin.', 'text-red-300');
                console.error('Bulk training error:', error);
            }
        }

        function parseBulkTrainingData(data) {
            const pairs = [];
            const lines = data.split('\n');
            let currentQuestion = '';
            let currentAnswer = '';
            let isReadingQuestion = false;
            let isReadingAnswer = false;
            
            for (let line of lines) {
                line = line.trim();
                
                if (line.toLowerCase().startsWith('soru:')) {
                    // Save previous pair if exists
                    if (currentQuestion && currentAnswer) {
                        pairs.push({
                            question: currentQuestion.trim(),
                            answer: currentAnswer.trim()
                        });
                    }
                    
                    // Start new question
                    currentQuestion = line.substring(5).trim(); // Remove "Soru:"
                    currentAnswer = '';
                    isReadingQuestion = true;
                    isReadingAnswer = false;
                } else if (line.toLowerCase().startsWith('cevap:')) {
                    // Start reading answer
                    currentAnswer = line.substring(6).trim(); // Remove "Cevap:"
                    isReadingQuestion = false;
                    isReadingAnswer = true;
                } else if (line === '') {
                    // Empty line - continue
                    continue;
                } else {
                    // Continue reading current section
                    if (isReadingQuestion) {
                        currentQuestion += ' ' + line;
                    } else if (isReadingAnswer) {
                        currentAnswer += ' ' + line;
                    }
                }
            }
            
            // Add the last pair
            if (currentQuestion && currentAnswer) {
                pairs.push({
                    question: currentQuestion.trim(),
                    answer: currentAnswer.trim()
                });
            }
            
            return pairs;
        }

        function showBulkResult(message, className) {
            const resultDiv = document.getElementById('bulkTrainingResult');
            resultDiv.textContent = message;
            resultDiv.className = `text-sm text-center ${className}`;
            resultDiv.classList.remove('hidden');
            
            // Hide after 5 seconds
            setTimeout(() => {
                resultDiv.classList.add('hidden');
            }, 5000);
        }

        function clearBulkTraining() {
            if (confirm('Toplu öğrenme alanını temizlemek istediğinizden emin misiniz?')) {
                document.getElementById('bulkTrainingData').value = '';
                document.getElementById('bulkTrainingResult').classList.add('hidden');
            }
        }

        // Credentials Functions
        function loadCredentialsData() {
            const credentialsDisplay = document.getElementById('credentialsDisplay');
            const userCredentials = JSON.parse(localStorage.getItem('userCredentials')) || {};
            
            if (Object.keys(userCredentials).length === 0) {
                credentialsDisplay.innerHTML = '<div class="text-center opacity-60 py-8 text-white">Henüz kayıtlı kullanıcı yok</div>';
                return;
            }
            
            credentialsDisplay.innerHTML = Object.values(userCredentials).map(cred => `
                <div class="glass-card p-4">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center space-x-2">
                            <span class="text-lg">👤</span>
                            <span class="font-semibold text-white">${cred.username}</span>
                        </div>
                        <span class="text-sm opacity-60 text-white">🔐</span>
                    </div>
                    <div class="text-sm text-white opacity-80">
                        <div>Şifre: <span class="font-mono bg-black/20 px-2 py-1 rounded">${cred.password}</span></div>
                        <div>Kayıt Tarihi: ${cred.registrationDate}</div>
                        <div>Son Giriş: ${cred.lastLogin || 'Henüz giriş yapmadı'}</div>
                    </div>
                </div>
            `).join('');
        }

        function clearCredentials() {
            if (confirm('Tüm kullanıcı kimlik bilgilerini silmek istediğinizden emin misiniz? Bu işlem geri alınamaz!')) {
                localStorage.removeItem('userCredentials');
                loadCredentialsData();
                
                // Also clear related data
                userDatabase = [];
                activeUsers = [];
                localStorage.setItem('userDatabase', JSON.stringify(userDatabase));
                localStorage.setItem('activeUsers', JSON.stringify(activeUsers));
                
                alert('Tüm kullanıcı verileri temizlendi!');
            }
        }

        // Update loadDatabaseData function
        function loadDatabaseData() {
            showDatabaseTab('messages');
            updateStatistics();
        }

        // Update statistics function
        function updateStatistics() {
            document.getElementById('totalSupport').textContent = supportMessages.length;
            document.getElementById('totalSuggestions').textContent = supportMessages.filter(msg => msg.type === 'suggestion').length;
            document.getElementById('totalComplaints').textContent = supportMessages.filter(msg => msg.type === 'complaint').length;
            
            // Count unique chat sessions
            const uniqueDates = [...new Set(chatLogs.map(log => log.date))];
            document.getElementById('totalChats').textContent = uniqueDates.length;
        }

        // Update addMessageToChat function to use İŞLEV
        function addMessageToChat(sender, message) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex items-start space-x-3';
            
            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="w-8 h-8 rounded-full bg-gradient-to-r from-green-500 to-blue-500 flex items-center justify-center text-white font-bold">U</div>
                    <div class="glass-card p-3 flex-1">
                        <p class="text-white">${message}</p>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="w-8 h-8 rounded-full bg-gradient-to-r from-purple-600 to-blue-600 flex items-center justify-center text-white font-bold">İ</div>
                    <div class="glass-card p-3 flex-1">
                        <p class="text-white">${message}</p>
                    </div>
                `;
            }
            
            // Save chat log to database
            const chatLog = {
                id: Date.now(),
                sender: sender,
                message: message,
                timestamp: new Date().toLocaleString('tr-TR'),
                date: new Date().toLocaleDateString('tr-TR')
            };
            
            chatLogs.push(chatLog);
            localStorage.setItem('chatLogs', JSON.stringify(chatLogs));
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Update showTypingIndicator function
        function showTypingIndicator() {
            const chatMessages = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typingIndicator';
            typingDiv.className = 'flex items-start space-x-3';
            typingDiv.innerHTML = `
                <div class="w-8 h-8 rounded-full bg-gradient-to-r from-purple-600 to-blue-600 flex items-center justify-center text-white font-bold">İ</div>
                <div class="glass-card p-3 flex-1">
                    <p class="text-white">Yazıyor...</p>
                </div>
            `;
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Username validation function
        function checkUsernameExists(username) {
            // Check in user credentials database
            const userCredentials = JSON.parse(localStorage.getItem('userCredentials')) || {};
            if (userCredentials[username.toLowerCase()]) {
                return true;
            }
            
            // Check in user database (historical records)
            const userDatabase = JSON.parse(localStorage.getItem('userDatabase')) || [];
            const existsInDatabase = userDatabase.some(user => 
                user.username.toLowerCase() === username.toLowerCase()
            );
            
            // Check in currently registered users
            const existsInRegistered = registeredUsers.some(user => 
                user.username.toLowerCase() === username.toLowerCase()
            );
            
            // Check in waiting queue
            const existsInQueue = waitingQueue.some(user => 
                user.username.toLowerCase() === username.toLowerCase()
            );
            
            return existsInDatabase || existsInRegistered || existsInQueue;
        }

        // Password visibility toggle function
        function togglePasswordVisibility() {
            const passwordInput = document.getElementById('passwordInput');
            const toggleButton = event.target;
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleButton.textContent = '🙈';
                toggleButton.title = 'Şifreyi gizle';
            } else {
                passwordInput.type = 'password';
                toggleButton.textContent = '👁️';
                toggleButton.title = 'Şifreyi göster';
            }
        }

        // Random Password Generator for Login
        function generateRandomPassword() {
            const length = 8;
            const charset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let password = '';
            
            for (let i = 0; i < length; i++) {
                password += charset.charAt(Math.floor(Math.random() * charset.length));
            }
            
            document.getElementById('passwordInput').value = password;
            
            // Show temporary notification
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = '✅';
            
            setTimeout(() => {
                button.textContent = originalText;
            }, 1000);
        }

        // ===== GAME FUNCTIONS =====

        // Snake Game Functions
        function initSnakeGame() {
            const board = document.getElementById('snakeBoard');
            board.innerHTML = '';
            snakeGame.board = [];
            
            for (let i = 0; i < 400; i++) {
                const cell = document.createElement('div');
                cell.className = 'snake-cell';
                cell.id = `snake-${i}`;
                board.appendChild(cell);
                snakeGame.board.push(cell);
            }
            
            updateSnakeDisplay();
            document.getElementById('snakeScore').textContent = snakeGame.score;
            document.getElementById('snakeHighScore').textContent = snakeGame.highScore;
        }

        function startSnakeGame() {
            if (!snakeGame.running) {
                snakeGame.running = true;
                snakeGame.interval = setInterval(moveSnake, 150);
                document.getElementById('snakeStartBtn').classList.add('hidden');
                document.getElementById('snakePauseBtn').classList.remove('hidden');
                
                // Add keyboard listeners
                document.addEventListener('keydown', handleSnakeKeyPress);
            }
        }

        function pauseSnakeGame() {
            snakeGame.running = false;
            clearInterval(snakeGame.interval);
            document.getElementById('snakeStartBtn').classList.remove('hidden');
            document.getElementById('snakePauseBtn').classList.add('hidden');
        }

        function resetSnakeGame() {
            pauseSnakeGame();
            snakeGame.snake = [{x: 10, y: 10}];
            snakeGame.direction = {x: 0, y: 0};
            snakeGame.score = 0;
            generateSnakeFood();
            updateSnakeDisplay();
            document.getElementById('snakeScore').textContent = snakeGame.score;
            document.removeEventListener('keydown', handleSnakeKeyPress);
        }

        function handleSnakeKeyPress(event) {
            if (!snakeGame.running) return;
            
            switch(event.key) {
                case 'ArrowUp':
                    if (snakeGame.direction.y === 0) snakeGame.direction = {x: 0, y: -1};
                    break;
                case 'ArrowDown':
                    if (snakeGame.direction.y === 0) snakeGame.direction = {x: 0, y: 1};
                    break;
                case 'ArrowLeft':
                    if (snakeGame.direction.x === 0) snakeGame.direction = {x: -1, y: 0};
                    break;
                case 'ArrowRight':
                    if (snakeGame.direction.x === 0) snakeGame.direction = {x: 1, y: 0};
                    break;
            }
        }

        function moveSnake() {
            const head = {
                x: snakeGame.snake[0].x + snakeGame.direction.x,
                y: snakeGame.snake[0].y + snakeGame.direction.y
            };
            
            // Check wall collision
            if (head.x < 0 || head.x >= 20 || head.y < 0 || head.y >= 20) {
                gameOverSnake();
                return;
            }
            
            // Check self collision
            if (snakeGame.snake.some(segment => segment.x === head.x && segment.y === head.y)) {
                gameOverSnake();
                return;
            }
            
            snakeGame.snake.unshift(head);
            
            // Check food collision
            if (head.x === snakeGame.food.x && head.y === snakeGame.food.y) {
                snakeGame.score += 10;
                document.getElementById('snakeScore').textContent = snakeGame.score;
                generateSnakeFood();
            } else {
                snakeGame.snake.pop();
            }
            
            updateSnakeDisplay();
        }

        function generateSnakeFood() {
            do {
                snakeGame.food = {
                    x: Math.floor(Math.random() * 20),
                    y: Math.floor(Math.random() * 20)
                };
            } while (snakeGame.snake.some(segment => segment.x === snakeGame.food.x && segment.y === snakeGame.food.y));
        }

        function updateSnakeDisplay() {
            // Clear board
            snakeGame.board.forEach(cell => {
                cell.className = 'snake-cell';
            });
            
            // Draw snake
            snakeGame.snake.forEach(segment => {
                const index = segment.y * 20 + segment.x;
                if (snakeGame.board[index]) {
                    snakeGame.board[index].classList.add('snake');
                }
            });
            
            // Draw food
            const foodIndex = snakeGame.food.y * 20 + snakeGame.food.x;
            if (snakeGame.board[foodIndex]) {
                snakeGame.board[foodIndex].classList.add('food');
            }
        }

        function gameOverSnake() {
            pauseSnakeGame();
            if (snakeGame.score > snakeGame.highScore) {
                snakeGame.highScore = snakeGame.score;
                localStorage.setItem('snakeHighScore', snakeGame.highScore);
                document.getElementById('snakeHighScore').textContent = snakeGame.highScore;
            }
            alert(`Oyun Bitti! Skorunuz: ${snakeGame.score}`);
        }

        // 2048 Game Functions
        function init2048Game() {
            game2048.board = [
                [0, 0, 0, 0],
                [0, 0, 0, 0],
                [0, 0, 0, 0],
                [0, 0, 0, 0]
            ];
            game2048.score = 0;
            addRandomTile();
            addRandomTile();
            update2048Display();
            document.addEventListener('keydown', handle2048KeyPress);
        }

        function resetGame2048() {
            init2048Game();
            document.getElementById('game2048Message').classList.add('hidden');
        }

        function handle2048KeyPress(event) {
            if (currentScreen !== 'game2048') return;
            
            let moved = false;
            switch(event.key) {
                case 'ArrowUp':
                    moved = move2048Up();
                    break;
                case 'ArrowDown':
                    moved = move2048Down();
                    break;
                case 'ArrowLeft':
                    moved = move2048Left();
                    break;
                case 'ArrowRight':
                    moved = move2048Right();
                    break;
            }
            
            if (moved) {
                addRandomTile();
                update2048Display();
                
                if (checkWin2048()) {
                    showMessage2048('🎉 Tebrikler! 2048\'e ulaştınız!', 'text-green-300');
                } else if (checkGameOver2048()) {
                    showMessage2048('😞 Oyun bitti! Yeni oyun için butona tıklayın.', 'text-red-300');
                }
            }
        }

        function addRandomTile() {
            const emptyCells = [];
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 4; j++) {
                    if (game2048.board[i][j] === 0) {
                        emptyCells.push({x: i, y: j});
                    }
                }
            }
            
            if (emptyCells.length > 0) {
                const randomCell = emptyCells[Math.floor(Math.random() * emptyCells.length)];
                game2048.board[randomCell.x][randomCell.y] = Math.random() < 0.9 ? 2 : 4;
            }
        }

        function update2048Display() {
            const board = document.getElementById('game2048Board');
            board.innerHTML = '';
            
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 4; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'game2048-cell';
                    const value = game2048.board[i][j];
                    
                    if (value !== 0) {
                        cell.textContent = value;
                        cell.classList.add(`tile-${value}`);
                    }
                    
                    board.appendChild(cell);
                }
            }
            
            document.getElementById('game2048Score').textContent = game2048.score;
            
            if (game2048.score > game2048.highScore) {
                game2048.highScore = game2048.score;
                localStorage.setItem('game2048HighScore', game2048.highScore);
            }
            document.getElementById('game2048HighScore').textContent = game2048.highScore;
        }

        function move2048Left() {
            let moved = false;
            for (let i = 0; i < 4; i++) {
                const row = game2048.board[i].filter(val => val !== 0);
                for (let j = 0; j < row.length - 1; j++) {
                    if (row[j] === row[j + 1]) {
                        row[j] *= 2;
                        game2048.score += row[j];
                        row.splice(j + 1, 1);
                    }
                }
                while (row.length < 4) {
                    row.push(0);
                }
                
                for (let j = 0; j < 4; j++) {
                    if (game2048.board[i][j] !== row[j]) {
                        moved = true;
                    }
                    game2048.board[i][j] = row[j];
                }
            }
            return moved;
        }

        function move2048Right() {
            let moved = false;
            for (let i = 0; i < 4; i++) {
                const row = game2048.board[i].filter(val => val !== 0);
                for (let j = row.length - 1; j > 0; j--) {
                    if (row[j] === row[j - 1]) {
                        row[j] *= 2;
                        game2048.score += row[j];
                        row.splice(j - 1, 1);
                        j--;
                    }
                }
                while (row.length < 4) {
                    row.unshift(0);
                }
                
                for (let j = 0; j < 4; j++) {
                    if (game2048.board[i][j] !== row[j]) {
                        moved = true;
                    }
                    game2048.board[i][j] = row[j];
                }
            }
            return moved;
        }

        function move2048Up() {
            let moved = false;
            for (let j = 0; j < 4; j++) {
                const column = [];
                for (let i = 0; i < 4; i++) {
                    if (game2048.board[i][j] !== 0) {
                        column.push(game2048.board[i][j]);
                    }
                }
                
                for (let i = 0; i < column.length - 1; i++) {
                    if (column[i] === column[i + 1]) {
                        column[i] *= 2;
                        game2048.score += column[i];
                        column.splice(i + 1, 1);
                    }
                }
                
                while (column.length < 4) {
                    column.push(0);
                }
                
                for (let i = 0; i < 4; i++) {
                    if (game2048.board[i][j] !== column[i]) {
                        moved = true;
                    }
                    game2048.board[i][j] = column[i];
                }
            }
            return moved;
        }

        function move2048Down() {
            let moved = false;
            for (let j = 0; j < 4; j++) {
                const column = [];
                for (let i = 0; i < 4; i++) {
                    if (game2048.board[i][j] !== 0) {
                        column.push(game2048.board[i][j]);
                    }
                }
                
                for (let i = column.length - 1; i > 0; i--) {
                    if (column[i] === column[i - 1]) {
                        column[i] *= 2;
                        game2048.score += column[i];
                        column.splice(i - 1, 1);
                        i--;
                    }
                }
                
                while (column.length < 4) {
                    column.unshift(0);
                }
                
                for (let i = 0; i < 4; i++) {
                    if (game2048.board[i][j] !== column[i]) {
                        moved = true;
                    }
                    game2048.board[i][j] = column[i];
                }
            }
            return moved;
        }

        function checkWin2048() {
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 4; j++) {
                    if (game2048.board[i][j] === 2048) {
                        return true;
                    }
                }
            }
            return false;
        }

        function checkGameOver2048() {
            // Check for empty cells
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 4; j++) {
                    if (game2048.board[i][j] === 0) {
                        return false;
                    }
                }
            }
            
            // Check for possible merges
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 3; j++) {
                    if (game2048.board[i][j] === game2048.board[i][j + 1] ||
                        game2048.board[j][i] === game2048.board[j + 1][i]) {
                        return false;
                    }
                }
            }
            
            return true;
        }

        function showMessage2048(message, className) {
            const messageDiv = document.getElementById('game2048Message');
            messageDiv.textContent = message;
            messageDiv.className = `mt-4 text-center text-white font-semibold ${className}`;
            messageDiv.classList.remove('hidden');
        }

        // Initialize app when page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96c810d841680ed1',t:'MTc1NDc1MTAyNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
